"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var iteeDatabase=require("itee-database"),iteeValidators=require("itee-validators"),iteeValidators__default=_interopDefault(iteeValidators),path=_interopDefault(require("path")),buffer=require("buffer"),fs=_interopDefault(require("fs")),stream=require("stream"),iteeUtils=require("itee-utils");require("mongoose");var threeFull=require("three-full"),iteeClient=require("itee-client"),bson=require("bson");console.log("Itee.Database.MongoDB v1.0.0 - EsModule"),console.log("Itee.Database v8.0.0 - EsModule");class TAbstractDataController{static __checkData(e,t,r){const o=t.body,a=t.params,n=t.query;return iteeValidators.isDefined(o)&&o[e]?o[e]:iteeValidators.isDefined(a)&&a[e]?a[e]:iteeValidators.isDefined(n)&&n[e]?n[e]:void TAbstractDataController.returnError({title:"Erreur de paramètre",message:`${e} n'existe pas dans les paramètres !`},r)}static _formatError(e){let t=[];if(iteeValidators.isArray(e))for(let r=0,o=e.length;r<o;++r)t=t.concat(TAbstractDataController._formatError(e[r]));else if(iteeValidators.isObject(e))if("ValidationError"===e.name){let r="",o=e.errors;for(let e in o)Object.prototype.hasOwnProperty.call(o,e)&&(r+=o[e].message+"<br>");t.push({title:"Erreur de validation",message:r||"Aucun message d'erreur... Gloups !"})}else"VersionError"===e.name?t.push({title:"Erreur de base de donnée",message:"Aucun document correspondant n'as put être trouvé pour la requete !"}):t.push({title:e.title||"Erreur",message:e.message||"Aucun message d'erreur... Gloups !"});else{if(!iteeValidators.isString(e))throw new Error(`Unknown error type: ${e} !`);t.push({title:"Erreur",message:e})}return t}static returnNotFound(e){if(iteeValidators.isFunction(e))return e();e.headersSent||e.status(204).end()}static returnError(e,t){if(iteeValidators.isFunction(t))return t(e,null);if(t.headersSent)return;const r=TAbstractDataController._formatError(e);t.format({"application/json":()=>{t.status(500).json(r)},default:()=>{t.status(406).send("Not Acceptable")}})}static returnData(e,t){if(iteeValidators.isFunction(t))return t(null,e);if(t.headersSent)return;const r=iteeValidators.isArray(e)?e:[e];t.format({"application/json":()=>{t.status(200).json(r)},default:()=>{t.status(406).send("Not Acceptable")}})}static returnErrorAndData(e,t,r){if(iteeValidators.isFunction(r))return r(e,t);if(r.headersSent)return;const o={errors:e,datas:t};r.format({"application/json":()=>{r.status(416).json(o)},default:()=>{r.status(416).send("Range Not Satisfiable")}})}constructor(e={}){const t={driver:null,useNext:!1,...e};this._driver=t.driver,this._useNext=t.useNext}return(e,t={}){const r=Object.assign({immediate:null,beforeAll:null,beforeReturnErrorAndData:null,afterReturnErrorAndData:null,beforeReturnError:null,afterReturnError:null,beforeReturnData:null,afterReturnData:null,beforeReturnNotFound:null,afterReturnNotFound:null,afterAll:null},t,{returnErrorAndData:TAbstractDataController.returnErrorAndData.bind(this),returnError:TAbstractDataController.returnError.bind(this),returnData:TAbstractDataController.returnData.bind(this),returnNotFound:TAbstractDataController.returnNotFound.bind(this)});return r.immediate&&r.immediate(),function(t=null,o=null){const a=iteeValidators.isDefined(o),n=iteeValidators.isDefined(t);r.beforeAll&&r.beforeAll(),a&&n?(r.beforeReturnErrorAndData&&r.beforeReturnErrorAndData(t,o),r.returnErrorAndData(t,o,e),r.afterReturnErrorAndData&&r.afterReturnErrorAndData(t,o)):a&&!n?(r.beforeReturnData&&r.beforeReturnData(o),r.returnData(o,e),r.afterReturnData&&r.afterReturnData(o)):!a&&n?(r.beforeReturnError&&r.beforeReturnError(t),r.returnError(t,e),r.afterReturnError&&r.afterReturnError(t)):a||n||(r.beforeReturnNotFound&&r.beforeReturnNotFound(),r.returnNotFound(e),r.afterReturnNotFound&&r.afterReturnNotFound()),r.afterAll&&r.afterAll()}}create(e,t,r){const o=e.body;iteeValidators.isNotDefined(o)?TAbstractDataController.returnError({title:"Erreur de paramètre",message:"Le corps de la requete ne peut pas être null ou indefini."},this._useNext?r:t):iteeValidators.isArray(o)?iteeValidators.isEmptyArray(o)?TAbstractDataController.returnError({title:"Erreur de paramètre",message:"Le tableau d'objet de la requete ne peut pas être vide."},this._useNext?r:t):this._createMany(o,t,r):iteeValidators.isObject(o)?iteeValidators.isEmptyObject(o)?TAbstractDataController.returnError({title:"Erreur de paramètre",message:"L'objet de la requete ne peut pas être vide."},this._useNext?r:t):this._createOne(o,t,r):TAbstractDataController.returnError({title:"Erreur de paramètre",message:"Le type de donnée de la requete est invalide. Les paramètres valides sont objet ou un tableau d'objet."},this._useNext?r:t)}_createOne(){}_createMany(){}read(e,t,r){const o=e.params.id,a=e.body,n=iteeValidators.isDefined(a),c=n?a.ids:null,i=n?a.query:null,m=n?a.projection:null;iteeValidators.isDefined(o)?iteeValidators.isNotString(o)?TAbstractDataController.returnError({title:"Erreur de paramètre",message:"L'identifiant devrait être une chaine de caractères."},this._useNext?r:t):iteeValidators.isEmptyString(o)||iteeValidators.isBlankString(o)?TAbstractDataController.returnError({title:"Erreur de paramètre",message:"L'identifiant ne peut pas être une chaine de caractères vide."},this._useNext?r:t):this._readOne(o,m,t,r):iteeValidators.isDefined(c)?iteeValidators.isNotArray(c)?TAbstractDataController.returnError({title:"Erreur de paramètre",message:"Le tableau d'identifiants devrait être un tableau de chaine de caractères."},this._useNext?r:t):iteeValidators.isEmptyArray(c)?TAbstractDataController.returnError({title:"Erreur de paramètre",message:"Le tableau d'identifiants ne peut pas être vide."},this._useNext?r:t):this._readMany(c,m,t,r):iteeValidators.isDefined(i)?iteeValidators.isNotObject(i)?TAbstractDataController.returnError({title:"Erreur de paramètre",message:"La requete devrait être un objet javascript."},this._useNext?r:t):iteeValidators.isEmptyObject(i)?this._readAll(m,t,r):this._readWhere(i,m,t,r):TAbstractDataController.returnError({title:"Erreur de paramètre",message:"La requete ne peut pas être null."},this._useNext?r:t)}_readOne(){}_readMany(){}_readWhere(){}_readAll(){}update(e,t,r){const o=e.params.id,a=e.body,n=iteeValidators.isDefined(a),c=n?a.ids:null,i=n?a.query:null,m=n?a.update:null;iteeValidators.isNotDefined(m)?TAbstractDataController.returnError({title:"Erreur de paramètre",message:"La mise à jour a appliquer ne peut pas être null ou indefini."},this._useNext?r:t):iteeValidators.isDefined(o)?iteeValidators.isNotString(o)?TAbstractDataController.returnError({title:"Erreur de paramètre",message:"L'identifiant devrait être une chaine de caractères."},this._useNext?r:t):iteeValidators.isEmptyString(o)||iteeValidators.isBlankString(o)?TAbstractDataController.returnError({title:"Erreur de paramètre",message:"L'identifiant ne peut pas être une chaine de caractères vide."},this._useNext?r:t):this._updateOne(o,m,t,r):iteeValidators.isDefined(c)?iteeValidators.isNotArray(c)?TAbstractDataController.returnError({title:"Erreur de paramètre",message:"Le tableau d'identifiants devrait être un tableau de chaine de caractères."},this._useNext?r:t):iteeValidators.isEmptyArray(c)?TAbstractDataController.returnError({title:"Erreur de paramètre",message:"Le tableau d'identifiants ne peut pas être vide."},this._useNext?r:t):this._updateMany(c,m,t,r):iteeValidators.isDefined(i)?iteeValidators.isNotObject(i)?TAbstractDataController.returnError({title:"Erreur de paramètre",message:"La requete devrait être un objet javascript."},this._useNext?r:t):iteeValidators.isEmptyObject(i)?this._updateAll(m,t,r):this._updateWhere(i,m,t,r):TAbstractDataController.returnError({title:"Erreur de paramètre",message:"La requete ne peut pas être vide."},this._useNext?r:t)}_updateOne(){}_updateMany(){}_updateWhere(){}_updateAll(){}delete(e,t,r){const o=e.params.id,a=e.body,n=iteeValidators.isDefined(a),c=n?a.ids:null,i=n?a.query:null;iteeValidators.isDefined(o)?iteeValidators.isNotString(o)?TAbstractDataController.returnError({title:"Erreur de paramètre",message:"L'identifiant devrait être une chaine de caractères."},this._useNext?r:t):iteeValidators.isEmptyString(o)||iteeValidators.isBlankString(o)?TAbstractDataController.returnError({title:"Erreur de paramètre",message:"L'identifiant ne peut pas être une chaine de caractères vide."},this._useNext?r:t):this._deleteOne(o,t,r):iteeValidators.isDefined(c)?iteeValidators.isNotArray(c)?TAbstractDataController.returnError({title:"Erreur de paramètre",message:"Le tableau d'identifiants devrait être un tableau de chaine de caractères."},this._useNext?r:t):iteeValidators.isEmptyArray(c)?TAbstractDataController.returnError({title:"Erreur de paramètre",message:"Le tableau d'identifiants ne peut pas être vide."},this._useNext?r:t):this._deleteMany(c,t,r):iteeValidators.isDefined(i)?iteeValidators.isNotObject(i)?TAbstractDataController.returnError({title:"Erreur de paramètre",message:"La requete devrait être un objet javascript."},this._useNext?r:t):iteeValidators.isEmptyObject(i)?this._deleteAll(t,r):this._deleteWhere(i,t,r):TAbstractDataController.returnError({title:"Erreur de paramètre",message:"La requete ne peut pas être vide."},this._useNext?r:t)}_deleteOne(){}_deleteMany(){}_deleteWhere(){}_deleteAll(){}}class MemoryWriteStream extends stream.Writable{constructor(e){super(e);const t=e.bufferSize||buffer.kStringMaxLength;this.memoryBuffer=Buffer.alloc(t),this.offset=0}_final(e){e()}_write(e,t,r){const o=Buffer.isBuffer(e)?e:new Buffer(e,t);for(let e=0,t=o.length;e<t;e++)this.memoryBuffer[this.offset]=o[e],this.offset++;r()}_writev(e,t){for(let t=0,r=e.length;t<r;t++)this.memoryBuffer=Buffer.concat([this.memoryBuffer,e[t]]);t()}_releaseMemory(){this.memoryBuffer=null}toArrayBuffer(){const e=this.memoryBuffer,t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let t=0;t<e.length;++t)r[t]=e[t];return this._releaseMemory(),t}toJSON(){return JSON.parse(this.toString())}toString(){const e=this.memoryBuffer.toString();return this._releaseMemory(),e}}class TAbstractFileConverter{constructor(e={}){const t={dumpType:TAbstractFileConverter.DumpType.ArrayBuffer,...e};this.dumpType=t.dumpType,this._isProcessing=!1,this._queue=[]}get dumpType(){return this._dumpType}set dumpType(e){if(iteeValidators.isNull(e))throw new TypeError("Dump type cannot be null ! Expect a non empty string.");if(iteeValidators.isUndefined(e))throw new TypeError("Dump type cannot be undefined ! Expect a non empty string.");this._dumpType=e}setDumpType(e){return this.dumpType=e,this}convert(e,t,r,o,a){e?(this._queue.push({file:e,parameters:t,onSuccess:r,onProgress:o,onError:a}),this._processQueue()):a("File cannot be null or empty, aborting file convertion !!!")}_processQueue(){if(0===this._queue.length||this._isProcessing)return;this._isProcessing=!0;const e=this,t=this._queue.shift(),r=t.file,o=t.parameters,a=t.onSuccess,n=t.onProgress,c=t.onError;if(iteeValidators.isString(r))e._dumpFileInMemoryAs(e._dumpType,r,o,i,d,s);else{const t=r.data;switch(e._dumpType){case TAbstractFileConverter.DumpType.ArrayBuffer:{const e=t.length,r=new ArrayBuffer(e),o=new Uint8Array(r);for(let r=0;r<e;++r)o[r]=t[r];i(r)}break;case TAbstractFileConverter.DumpType.JSON:i(JSON.parse(t.toString()));break;case TAbstractFileConverter.DumpType.String:i(t.toString());break;default:throw new RangeError(`Invalid switch parameter: ${e._dumpType}`)}}function i(t){e._convert(t,o,m,d,s)}function m(t){a(t),e._isProcessing=!1,e._processQueue()}function d(e){n(e)}function s(t){c(t),e._isProcessing=!1,e._processQueue()}}_dumpFileInMemoryAs(e,t,r,o,a,n){let c=!1;const i=fs.createReadStream(t);i.on("error",e=>{console.error(`Read stream on error: ${e}`),c=!0,n(e)});const m=parseInt(r.fileSize),d=new MemoryWriteStream({bufferSize:m});d.on("error",e=>{c=!0,n(e)}),d.on("finish",()=>{if(!c){switch(e){case TAbstractFileConverter.DumpType.ArrayBuffer:o(d.toArrayBuffer());break;case TAbstractFileConverter.DumpType.String:o(d.toString());break;case TAbstractFileConverter.DumpType.JSON:o(d.toJSON());break;default:throw new RangeError(`Invalid switch parameter: ${e}`)}i.unpipe(),i.close(),d.end()}}),i.pipe(d)}_convert(){}}TAbstractFileConverter.MAX_FILE_SIZE=67108864,TAbstractFileConverter.DumpType=Object.freeze({ArrayBuffer:0,String:1,JSON:2});class TAbstractDatabasePlugin{static _registerRoutesTo(e,t,r,o,a){for(let n=0,c=a.length;n<c;n++){const c=a[n],i=new(o.get(c.controller.name))({driver:e,...c.controller.options}),m=r({mergeParams:!0});console.log(`\tAdd controller for base route: ${c.route}`),t.use(c.route,TAbstractDatabasePlugin._populateRouter(m,i,c.controller.can))}}static _populateRouter(e,t,r={}){for(let o in r){const a=r[o];console.log(`\t\tMap route ${a.over} on (${a.on}) to ${t.constructor.name}.${o} method.`),e[a.on](a.over,t[o].bind(t))}return e}constructor(e={}){const t={controllers:new Map,descriptors:[],...e};this.controllers=t.controllers,this.descriptors=t.descriptors,this.__dirname=void 0}get controllers(){return this._controllers}set controllers(e){if(iteeValidators.isNull(e))throw new TypeError("Controllers cannot be null ! Expect a map of controller.");if(iteeValidators.isUndefined(e))throw new TypeError("Controllers cannot be undefined ! Expect a map of controller.");if(!(e instanceof Map))throw new TypeError(`Controllers cannot be an instance of ${e.constructor.name} ! Expect a map of controller.`);this._controllers=e}get descriptors(){return this._descriptors}set descriptors(e){if(iteeValidators.isNull(e))throw new TypeError("Descriptors cannot be null ! Expect an array of POJO.");if(iteeValidators.isUndefined(e))throw new TypeError("Descriptors cannot be undefined ! Expect an array of POJO.");this._descriptors=e}addController(e){return this._controllers.set(e.name,e),this}addDescriptor(e){return this._descriptors.push(e),this}beforeRegisterRoutes(){}registerTo(e,t,r){this.beforeRegisterRoutes(e),TAbstractDatabasePlugin._registerRoutesTo(e,t,r,this._controllers,this._descriptors)}}class TMongooseController extends TAbstractDataController{constructor(e={}){const t={driver:null,schemaName:"",...e};super(t),this.databaseSchema=this._driver.model(t.schemaName)}get databaseSchema(){return this._databaseSchema}set databaseSchema(e){if(iteeValidators.isNull(e))throw new TypeError("Database schema cannot be null.");if(iteeValidators.isUndefined(e))throw new TypeError("Database schema cannot be undefined.");this._databaseSchema=e}setDatabaseSchema(e){return this.databaseSchema=e,this}_createMany(e,t){super._createMany(e,t),this._databaseSchema.create(e,this.return(t))}_createOne(e,t){super._createOne(e,t),this._databaseSchema.create(e,this.return(t))}_deleteAll(e){super._deleteAll(e),this._databaseSchema.collection.drop(this.return(e))}_deleteMany(e,t){super._deleteMany(e,t),this._databaseSchema.deleteMany({_id:{$in:e}},this.return(t))}_deleteOne(e,t){super._deleteOne(e,t),this._databaseSchema.findByIdAndDelete(e).then(e=>TAbstractDataController.returnData(e,t)).catch(e=>TAbstractDataController.returnError(e,t))}_deleteWhere(e,t){super._deleteWhere(e,t),this._databaseSchema.deleteMany(e,this.return(t))}_readAll(e,t){super._readAll(e,t),this._databaseSchema.find({},e).lean().exec().then(e=>TAbstractDataController.returnData(e,t)).catch(e=>TAbstractDataController.returnError(e,t))}_readMany(e,t,r){super._readMany(e,t,r),this._databaseSchema.find({_id:{$in:e}},t).lean().exec().then(t=>{iteeValidators.isNull(t)||iteeValidators.isEmptyArray(t)?TAbstractDataController.returnNotFound(r):e.length!==t.length?TAbstractDataController.returnErrorAndData({title:"Missing data",message:"Some requested objects could not be found."},t,r):TAbstractDataController.returnData(t,r)}).catch(e=>TAbstractDataController.returnError(e,r))}_readOne(e,t,r){super._readOne(e,t,r),this._databaseSchema.findById(e,t).lean().exec().then(e=>{iteeValidators.isNull(e)?TAbstractDataController.returnNotFound(r):TAbstractDataController.returnData(e,r)}).catch(e=>TAbstractDataController.returnError(e,r))}_readWhere(e,t,r){super._readWhere(e,t,r),this._databaseSchema.find(e,t).lean().exec().then(e=>TAbstractDataController.returnData(e,r)).catch(e=>TAbstractDataController.returnError(e,r))}_updateAll(e,t){super._updateAll(e,t),this._databaseSchema.update({},e,{multi:!0},this.return(t))}_updateMany(e,t,r){super._updateMany(e,t,r),this._databaseSchema.update({_id:{$in:e}},t,{multi:!0},this.return(r))}_updateOne(e,t,r){super._updateOne(e,t,r),this._databaseSchema.findByIdAndUpdate(e,t).exec().then(e=>TAbstractDataController.returnData(e,r)).catch(e=>TAbstractDataController.returnError(e,r))}_updateWhere(e,t,r){super._updateWhere(e,t,r),this._databaseSchema.update(e,t,{multi:!0},this.return(r))}}class TMongoDBPlugin extends TAbstractDatabasePlugin{constructor(e={}){const t={types:[],schemas:[],...e};super(t),this.types=t.types,this.schemas=t.schemas}get schemas(){return this._schemas}set schemas(e){this._schemas=e}get types(){return this._types}set types(e){this._types=e}addSchema(e){return this._schemas.push(e),this}addType(e){return this._types.push(e),this}beforeRegisterRoutes(e){super.beforeRegisterRoutes(e),this._searchLocalTypes(),this._registerTypes(e),this._searchLocalSchemas(),this._registerSchemas(e)}_searchLocalTypes(){const e=path.join(this.__dirname,"types");if(iteeValidators.isInvalidDirectoryPath(e))return void console.warn(`Unable to find "types" folder for path "${e}"`);console.log(`Add types from: ${e}`);const t=iteeUtils.getFilesPathsUnder(e);let r="",o=void 0;for(let e=0,a=t.length;e<a;e++)r=t[e],o=require(r),this._types.push(o)}_registerTypes(e){for(let t of this._types)console.log(`Register type: ${t.name}`),t(e)}_searchLocalSchemas(){const e=path.join(this.__dirname,"schemas");if(iteeValidators.isInvalidDirectoryPath(e))return void console.warn(`Unable to find "schemas" folder for path "${e}"`);console.log(`Add schemas from: ${e}`);const t=iteeUtils.getFilesPathsUnder(e);let r="",o=void 0;for(let e=0,a=t.length;e<a;e++)r=t[e],iteeValidators.isEmptyFile(r)?console.warn(`Skip empty local database schema: ${r}`):(o=require(r),this._schemas.push(o))}_registerSchemas(e){for(let t of this._schemas)console.log(`Register schema: ${t.name}`),iteeValidators.isFunction(t.registerModelTo)?t.registerModelTo(e):iteeValidators.isFunction(t)?t(e):console.error(`Unable to register local database schema: ${t}`)}}class ColladaToThree extends iteeDatabase.TAbstractFileConverter{constructor(){super({dumpType:iteeDatabase.TAbstractFileConverter.DumpType.ArrayBuffer})}_convert(e,t,r,o,a){super._convert(e,t,r,o,a);try{r((new threeFull.ColladaLoader).parse(e))}catch(e){a(e)}}}const DBFVersion=Object.freeze({FoxPro:48,FoxPro_Autoincrement:49,dBASE_II:2,FoxPro_Var:50,dBASE_III_plus:3,dBASE_III_plus_memo:131,dBASE_IV_SQL_table:67,dBASE_IV_SQL_system:99,dBASE_IV_memo:139,dBASE_IV_memo_SQL_table:203,FoxBase:251,dBase_v_7:4,FoxPro_2_x:245,HiPerSix_memo:229}),DataType=Object.freeze({Binary:"B",Character:"C",Date:"D",Numeric:"N",Logical:"L",Memo:"M",Timestamp:"@",Long:"I",Autoincrement:"+",Float:"F",Double:"O",OLE:"G"});function DBFLoader(e=threeFull.DefaultLoadingManager,t=iteeClient.DefaultLogger){this.manager=e,this.logger=t,this.reader=new iteeClient.TBinaryReader}Object.assign(DBFLoader,{Terminator:13,DeletedRecord:26,YearOffset:1900}),Object.assign(DBFLoader.prototype,{load(e,t,r,o){const a=this,n=new threeFull.FileLoader(a.manager);n.setResponseType("arraybuffer"),n.load(e,e=>{t(a.parse(e))},r,o)},parse(e){this.reader.setEndianess(iteeClient.Endianness.Big).setBuffer(e);const t=this.reader.getInt8();if(!this._isValidVersion(t))return this.logger.error(`DBFLoader: Invalid version number: ${t}`),null;const r=this._parseHeader(t);return{header:r,datas:this._parseDatas(t,r)}},_isValidVersion:e=>Object.values(DBFVersion).includes(e),_parseHeader(e){let t={};switch(e){case DBFVersion.FoxPro:case DBFVersion.FoxPro_Autoincrement:case DBFVersion.FoxPro_Var:case DBFVersion.dBASE_II:t=this._parseHeaderV2();break;case DBFVersion.dBASE_III_plus:case DBFVersion.dBASE_III_plus_memo:t=this._parseHeaderV2_5();break;case DBFVersion.dBASE_IV_memo:case DBFVersion.dBASE_IV_memo_SQL_table:case DBFVersion.dBASE_IV_SQL_system:case DBFVersion.dBASE_IV_SQL_table:t=this._parseHeaderV3();break;case DBFVersion.dBase_v_7:case DBFVersion.FoxPro_2_x:case DBFVersion.HiPerSix_memo:t=this._parseHeaderV4();break;default:throw new RangeError(`Invalid version parameter: ${e}`)}return this.reader.getUint8()!==DBFLoader.Terminator&&this.logger.error("DBFLoader: Invalid terminator after field descriptors !!!"),t},_parseHeaderV2(){const e=this.reader.getInt16(),t=this.reader.getInt8()+DBFLoader.YearOffset,r=this.reader.getInt8(),o=this.reader.getInt8(),a=this.reader.getInt16();let n=[],c=void 0,i=void 0,m=void 0,d=void 0,s=void 0;for(let t=0;t<e;t++)c=this.reader.getString(11),i=this.reader.getChar(),m=this.reader.getUint8(),d=this.reader.getInt16(),s=this.reader.getInt8(),n.push({name:c,type:i,length:m,memoryAddress:d,decimalCount:s});return{numberOfRecords:e,year:t,month:r,day:o,lengthOfEachRecords:a,fields:n}},_parseHeaderV2_5(){const e=this.reader.getInt8()+DBFLoader.YearOffset,t=this.reader.getInt8(),r=this.reader.getInt8();this.reader.setEndianess(iteeClient.Endianness.Little);const o=this.reader.getInt32(),a=this.reader.getInt16(),n=this.reader.getInt16();this.reader.setEndianess(iteeClient.Endianness.Big),this.reader.skipOffsetOf(20);let c=[],i=void 0,m=void 0,d=void 0,s=void 0,l=void 0,$=void 0,h=void 0;for(let e=0;e<o;e++)i=this.reader.getString(11),m=this.reader.getChar(),s=this.reader.getInt32(),d=this.reader.getUint8(),l=this.reader.getUint8(),this.reader.skipOffsetOf(2),$=this.reader.getInt8(),this.reader.skipOffsetOf(2),h=this.reader.getInt8(),this.reader.skipOffsetOf(1),c.push({name:i,type:m,length:d,memoryAddress:s,decimalCount:l,workAreaId:$,MDXFlag:h});return{year:e,month:t,day:r,numberOfRecords:o,numberOfByteInHeader:a,numberOfByteInRecord:n,fields:c}},_parseHeaderV3(){const e=this.reader.getInt8()+DBFLoader.YearOffset,t=this.reader.getInt8(),r=this.reader.getInt8();this.reader.setEndianess(iteeClient.Endianness.Little);const o=this.reader.getInt32(),a=this.reader.getInt16(),n=this.reader.getInt16();this.reader.setEndianess(iteeClient.Endianness.Big),this.reader.skipOffsetOf(2);const c=this.reader.getInt8(),i=this.reader.getInt8();this.reader.skipOffsetOf(12);const m=this.reader.getInt8(),d=this.reader.getInt8();this.reader.skipOffsetOf(2);let s=[],l=void 0,$=void 0,h=void 0,u=void 0,_=void 0,g=void 0;for(;this.reader.getOffset()<a-1;)l=this.reader.getString(11),$=this.reader.getChar(),this.reader.skipOffsetOf(4),h=this.reader.getUint8(),u=this.reader.getUint8(),this.reader.skipOffsetOf(2),_=this.reader.getInt8(),this.reader.skipOffsetOf(10),g=this.reader.getInt8(),s.push({name:l,type:$,length:h,decimalCount:u,workAreaId:_,MDXFieldFlag:g});return{year:e,month:t,day:r,numberOfRecords:o,numberOfByteInHeader:a,numberOfByteInRecord:n,incompleteTransactionFlag:c,encryptionFlag:i,MDXFlag:m,languageDriverId:d,fields:s}},_parseHeaderV4(){const e=this.reader.getInt8()+DBFLoader.YearOffset,t=this.reader.getInt8(),r=this.reader.getInt8();this.reader.setEndianess(iteeClient.Endianness.Little);const o=this.reader.getInt32(),a=this.reader.getInt16(),n=this.reader.getInt16();this.reader.setEndianess(iteeClient.Endianness.Big),this.reader.skipOffsetOf(2);const c=this.reader.getInt8(),i=this.reader.getInt8();this.reader.skipOffsetOf(12);const m=this.reader.getInt8(),d=this.reader.getInt8();this.reader.skipOffsetOf(2);const s=this.reader.getString(32);this.reader.skipOffsetOf(4);let l=[],$=void 0,h=void 0,u=void 0,_=void 0,g=void 0,f=void 0;for(let e=0;e<o;e++)$=this.reader.getString(32),h=this.reader.getChar(),u=this.reader.getUint8(),_=this.reader.getUint8(),this.reader.skipOffsetOf(2),g=this.reader.getInt8(),this.reader.skipOffsetOf(2),f=this.reader.getInt32(),this.reader.skipOffsetOf(4),l.push({name:$,type:h,length:u,decimalCount:_,MDXFieldFlag:g,nextAutoincrementValue:f});return{year:e,month:t,day:r,numberOfRecords:o,numberOfByteInHeader:a,numberOfByteInRecord:n,incompleteTransactionFlag:c,encryptionFlag:i,MDXFlag:m,languageDriverId:d,languageDriverName:s,fields:l}},_parseDatas(e,t){const r=t.numberOfRecords,o=t.fields;let a=[],n=null,c=null;for(let e=0;e<r;e++){(n={}).deleted=this.reader.getUint8()===DBFLoader.DeletedRecord;for(let e=0,t=o.length;e<t;e++)switch((c=o[e]).type){case DataType.Binary:{const e=this.reader.getString(c.length);n[c.name]=parseInt(e)}break;case DataType.Numeric:{const e=this.reader.getString(c.length);n[c.name]=parseInt(e)}break;case DataType.Character:case DataType.Date:n[c.name]=this.reader.getString(c.length);break;case DataType.Logical:{const e=this.reader.getChar().toLowerCase();n[c.name]="t"===e||"y"===e||"f"!==e&&"n"!==e&&null}break;case DataType.Memo:n[c.name]=this.reader.getString(c.length);break;case DataType.Timestamp:break;case DataType.Long:case DataType.Autoincrement:n[c.name]=this.reader.getInt32();break;case DataType.Float:{const e=this.reader.getString(c.length);n[c.name]=parseInt(e)}break;case DataType.Double:n[c.name]=this.reader.getFloat64();break;case DataType.OLE:n[c.name]=this.reader.getString(c.length);break;default:throw new RangeError(`Invalid data type parameter: ${c.type}`)}a.push(n)}return a},_parseFieldProperties(){const e=this.reader.getInt16(),t=this.reader.getInt16(),r=this.reader.getInt16(),o=this.reader.getInt16(),a=this.reader.getInt16(),n=this.reader.getInt16(),c=this.reader.getInt16(),i=this.reader.getInt16();let m=[];for(let t=0;t<e;t++)m.push(this._getStandardProperties());let d=[];for(let e=0;e<r;e++)d.push(this._getCustomProperties());let s=[];for(let e=0;e<a;e++)s.push(this._getReferentialIntegrityProperties());return{numberOfStandardProperties:e,startOfStandardPropertiesDescriptor:t,numberOfCustomProperties:r,startOfCustomPropertiesDescriptor:o,numberOfReferentialIntegrityProperties:a,startOfReferentialIntegrityDescriptor:n,startOfData:c,sizeOfPropertiesStructure:i,standardProperties:m,customProperties:d,referentialIntegrityProperties:s}},_getStandardProperties(){const e=this.reader.getInt16(),t=this.reader.getInt16(),r=this.reader.getInt8(),o=this.reader.getInt8(),a=this.reader.getInt8();return this.reader.skipOffsetOf(4),{generationalNumber:e,tableFieldOffset:t,propertyDescribed:r,type:o,isConstraint:a,offsetFromStart:this.reader.getInt16(),widthOfDatabaseField:this.reader.getInt16()}},_getCustomProperties(){const e=this.reader.getInt16(),t=this.reader.getInt16(),r=this.reader.getInt8();return this.reader.skipOffsetOf(1),{generationalNumber:e,tableFieldOffset:t,type:r,offsetFromStartOfName:this.reader.getInt16(),lengthOfName:this.reader.getInt16(),offsetFromStartOfData:this.reader.getInt16(),lengthOfData:this.reader.getInt16()}},_getReferentialIntegrityProperties(){return{databaseState:this.reader.getInt8(),sequentialNumberRule:this.reader.getInt16(),offsetOfTheRIRuleName:this.reader.getInt16(),sizeOfTheRIRuleName:this.reader.getInt16(),offsetOfNameOfForeignTable:this.reader.getInt16(),sizeOfNameOfForeignTable:this.reader.getInt16(),stateBehaviour:this.reader.getInt8(),numberOfFieldsInLinkingKey:this.reader.getInt16(),offsetOfLocalTableTagName:this.reader.getInt16(),sizeOfTheLocalTableTagName:this.reader.getInt16(),offsetOfForeignTableTagName:this.reader.getInt16(),sizeOfTheForeignTableTagName:this.reader.getInt16()}}});class DbfToThree extends iteeDatabase.TAbstractFileConverter{constructor(){super({dumpType:iteeDatabase.TAbstractFileConverter.DumpType.ArrayBuffer})}_convert(e,t,r,o,a){super._convert(e,t,r,o,a);try{r((new DBFLoader).parse(e))}catch(e){a(e)}}}class FbxToThree extends iteeDatabase.TAbstractFileConverter{constructor(){super({dumpType:iteeDatabase.TAbstractFileConverter.DumpType.ArrayBuffer})}_convert(e,t,r,o,a){super._convert(e,t,r,o,a);try{r((new threeFull.FBXLoader).parse(e))}catch(e){a(e)}}}class JsonToThree extends iteeDatabase.TAbstractFileConverter{constructor(){super({dumpType:iteeDatabase.TAbstractFileConverter.DumpType.JSON})}_convert(e,t,r,o,a){super._convert(e,t,r,o,a);try{r((new threeFull.ObjectLoader).parse(e))}catch(e){a(e)}}}class MtlToThree extends iteeDatabase.TAbstractFileConverter{constructor(){super({dumpType:iteeDatabase.TAbstractFileConverter.DumpType.String})}_convert(e,t,r,o,a){super._convert(e,t,r,o,a);try{r((new threeFull.MTLLoader).parse(e))}catch(e){a(e)}}}class Obj2ToThree extends iteeDatabase.TAbstractFileConverter{constructor(){super({dumpType:iteeDatabase.TAbstractFileConverter.DumpType.JSON})}_convert(e,t,r,o,a){super._convert(e,t,r,o,a);try{r((new threeFull.OBJLoader2).parse(e))}catch(e){a(e)}}}const ShapeType=Object.freeze({NullShape:0,Point:1,Polyline:3,Polygon:5,MultiPoint:8,PointZ:11,PolyLineZ:13,PolygonZ:15,MultiPointZ:18,PointM:21,PolylineM:23,PolygonM:25,MultiPointM:28,MultiPatch:31});function ringClockwise(e){if((t=e.length)<4)return!1;for(var t,r=0,o=e[t-1][1]*e[0][0]-e[t-1][0]*e[0][1];++r<t;)o+=e[r-1][1]*e[r][0]-e[r-1][0]*e[r][1];return o>=0}function ringContainsSome(e,t){let r=0,o=t.length;do{if(ringContains(e,t[r])>0)return!0}while(++r<o);return!1}function ringContains(e,t){let r=t[0],o=t[1],a=-1;for(let n=0,c=e.length,i=c-1;n<c;i=n++){const c=e[n],m=c[0],d=c[1],s=e[i],l=s[0],$=s[1];segmentContains(c,s,t)?a=0:d>o!=$>o&&r<(l-m)*(o-d)/($-d)+m&&(a=-a)}return a}function segmentContains(e,t,r){var o=r[0]-e[0],a=r[1]-e[1];if(0===o&&0===a)return!0;var n=t[0]-e[0],c=t[1]-e[1];if(0===n&&0===c)return!1;var i=(o*n+a*c)/(n*n+c*c);return!(i<0||i>1)&&(0===i||1===i||i*n===o&&i*c===a)}function SHPLoader(e=threeFull.DefaultLoadingManager,t=iteeClient.DefaultLogger){this.manager=e,this.logger=t,this.globalOffset=new threeFull.Vector3,this.worldAxis={from:"zUp",to:"zForward"},this._reader=new iteeClient.TBinaryReader}Object.assign(SHPLoader,{FileCode:9994,MinFileLength:100,MinVersion:1e3}),Object.assign(SHPLoader.prototype,{load(e,t,r,o){const a=this,n=new threeFull.FileLoader(a.manager);n.setResponseType("arraybuffer"),n.load(e,e=>{t(a.parse(e))},r,o)},parse(e){this._reader.setEndianess(iteeClient.Endianness.Big).setBuffer(e);const t=this._parseHeader();if(t.fileCode!==SHPLoader.FileCode)return this.logger.error("SHPLoader: Invalide Shape file code !"),null;if(t.fileLength<SHPLoader.MinFileLength)return this.logger.error("SHPLoader: Shape file have an incorrect length !"),null;if(!Object.values(ShapeType).includes(t.shapeType))return this.logger.error("SHPLoader: Shape file have an incorrect shape type !"),null;t.version<SHPLoader.MinVersion&&this.logger.warn("SHPLoader: Version of shape file below than 1000 could be incorrectly parsed !");const r=this._parseDatas(t);return this._convertToObjects(r)},_parseHeader(){const e=this._reader.getInt32();this._reader.skipOffsetOf(20);const t=this._reader.getInt32();this._reader.setEndianess(iteeClient.Endianness.Little);const r=this._reader.getInt32(),o=this._reader.getInt32(),a=this._reader.getInt32(),n=this._reader.getInt32();return{fileCode:e,fileLength:t,version:r,shapeType:o,boundingBox:{xMin:a,xMax:this._reader.getInt32(),yMin:n,yMax:this._reader.getInt32(),zMin:this._reader.getInt32(),zMax:this._reader.getInt32(),mMin:this._reader.getInt32(),mMax:this._reader.getInt32()}}},_parseDatas(e){this._reader.skipOffsetTo(100);let t=[],r=void 0,o=void 0,a=void 0;for(;!this._reader.isEndOfFile();)switch(r=this._parseRecordHeader(),o=this._reader.getOffset()+2*r.contentLength,this._reader.setEndianess(iteeClient.Endianness.Little),e.shapeType){case ShapeType.NullShape:this._reader.skipOffsetTo(o);break;case ShapeType.Point:case ShapeType.PointZ:case ShapeType.PointM:for(;this._reader.getOffset()<o;)(a=this._parsePoint())&&t.push(a);break;case ShapeType.Polyline:case ShapeType.PolyLineZ:case ShapeType.PolylineM:for(;this._reader.getOffset()<o;)(a=this._parsePolyLine())&&t.push(a);break;case ShapeType.Polygon:case ShapeType.PolygonZ:case ShapeType.PolygonM:for(;this._reader.getOffset()<o;)(a=this._parsePolyLine())&&t.push(a);break;case ShapeType.MultiPoint:case ShapeType.MultiPointZ:case ShapeType.MultiPointM:for(;this._reader.getOffset()<o;)(a=this._parseMultiPoint())&&t.push(a);break;case ShapeType.MultiPatch:for(;this._reader.getOffset()<o;)(a=this._parseMultiPatch())&&t.push(a);break;default:this.logger.error(`SHPLoader: Invalid switch parameter: ${e.shapeType}`)}return t},_parseRecordHeader(){return this._reader.setEndianess(iteeClient.Endianness.Big),{recordNumber:this._reader.getInt32(),contentLength:this._reader.getInt32()}},_parsePoint(){const e=this._reader.getInt32();return e===ShapeType.NullShape?null:{shapeType:e,x:this._reader.getFloat64(),y:this._reader.getFloat64()}},_parsePolyLine(){const e=this._reader.getInt32();if(e===ShapeType.NullShape)return null;const t={xMin:this._reader.getFloat64(),yMin:this._reader.getFloat64(),xMax:this._reader.getFloat64(),yMax:this._reader.getFloat64()},r=this._reader.getInt32(),o=this._reader.getInt32(),a=new Array(r);for(let e=0;e<r;e++)a[e]=this._reader.getInt32();const n=new Array(o);for(let e=0;e<o;e++)n[e]={x:this._reader.getFloat64(),y:this._reader.getFloat64()};return{shapeType:e,boundingBox:t,numberOfParts:r,numberOfPoints:o,parts:a,points:n}},_parsePolygon(){const e=this._reader.getInt32();if(e===ShapeType.NullShape)return null;const t={xMin:this._reader.getFloat64(),yMin:this._reader.getFloat64(),xMax:this._reader.getFloat64(),yMax:this._reader.getFloat64()},r=this._reader.getInt32(),o=this._reader.getInt32();let a=new Array(r);for(let e=0;e<r;e++)a[e]=this._reader.getInt32();let n=new Array(o);for(let e=0;e<o;e++)n[e]={x:this._reader.getFloat64(),y:this._reader.getFloat64()};const c=[],i=[];return a.forEach((e,t)=>{const r=n.slice(e,a[t+1]);ringClockwise(r)?c.push(r):i.push(r)}),i.forEach(e=>{c.some(t=>{if(ringContainsSome(t[0],e))return t.push(e),!0})||c.push([e])}),{shapeType:e,boundingBox:t,numberOfParts:r,numberOfPoints:o,parts:a,polygons:c}},_parseMultiPoint(){const e=this._reader.getInt32();if(e===ShapeType.NullShape)return null;const t={xMin:this._reader.getFloat64(),xMax:this._reader.getFloat64(),yMin:this._reader.getFloat64(),yMax:this._reader.getFloat64()},r=this._reader.getInt32(),o=new Array(r);for(let e=0;e<r;e++)o.push([this._reader.getFloat64(),this._reader.getFloat64()]);return{shapeType:e,boundingBox:t,numberOfPoints:r,points:o}},_parseMultiPatch(){const e=this._reader.getInt32();return e===ShapeType.NullShape?null:{shapeType:e}},_convertToObjects(e){let t=[];for(let t=0,a=e.length;t<a;t++){let a=e[t];a.shapeType!==ShapeType.Polygon&&a.shapeType!==ShapeType.PolygonZ&&a.shapeType!==ShapeType.PolygonM||(a.points&&Array.isArray(a.points[0])?r(a.points):o(a.points))}function r(e){for(let t=0,a=e.length;t<a;t++){let a=e[t];a?Array.isArray(a[0])?r(a):o(a):this.logger.log("no array, oups !")}}function o(e){t.push(new threeFull.Shape(e))}return t}});class ShpToThree extends iteeDatabase.TAbstractFileConverter{constructor(){super({dumpType:iteeDatabase.TAbstractFileConverter.DumpType.ArrayBuffer})}_convert(e,t,r,o,a){super._convert(e,t,r,o,a);try{r((new SHPLoader).parse(e))}catch(e){a(e)}}}class StlToThree extends iteeDatabase.TAbstractFileConverter{constructor(){super({dumpType:iteeDatabase.TAbstractFileConverter.DumpType.JSON})}_convert(e,t,r,o,a){super._convert(e,t,r,o,a);try{r((new threeFull.STLLoader).parse(e))}catch(e){a(e)}}}class TdsToThree extends iteeDatabase.TAbstractFileConverter{constructor(){super({dumpType:iteeDatabase.TAbstractFileConverter.DumpType.ArrayBuffer})}_convert(e,t,r,o,a){super._convert(e,t,r,o,a);try{r((new threeFull.TDSLoader).parse(e))}catch(e){a(e)}}}class ThreeToMongoDB extends iteeDatabase.TAbstractDataInserter{constructor(e={}){super(e),this.mergeStrategy="add"}static _arrayify(e){let t=[];return iteeValidators.isDefined(e)&&(t=iteeValidators.isArray(e)?e:[e]),t}async _save(e,t,r,o,a){const n=ThreeToMongoDB._arrayify(e);if(iteeValidators.isEmptyArray(n))return void a("No data to save in database. Abort insert !");const c=n.map(e=>e.name);console.log(`ThreeToMongoDB: Saving ${c}`),t.mergeStrategy&&(this.mergeStrategy=t.mergeStrategy);try{const e=t.parentId;let o=null,c=null;if(iteeValidators.isDefined(e)){const r=this._readOneDocument("Objects3D",{_id:e});if(iteeValidators.isNull(r))return void a(`Unable to retrieve parent with id (${t.parentId}). Abort insert !`);if("add"===this.mergeStrategy)o=await this._parseObjects(n,e),c=iteeValidators.isDefined(o)?o.filter(e=>e).map(e=>e._id):[],this._updateDocument(r,{$addToSet:{children:c}});else if("replace"===this.mergeStrategy){const t=this._readManyDocument("Objects3D",{parent:e}),a=n.map(e=>e.uuid),i=t.filter(e=>!a.includes(e.uuid));this._removeChildrenDocuments(i),o=await this._parseObjects(n,e),c=iteeValidators.isDefined(o)?o.filter(e=>e).map(e=>e._id):[],this._updateDocument(r,{$set:{children:c}})}}else o=await this._parseObjects(n,null),c=iteeValidators.isDefined(o)?o.filter(e=>e).map(e=>e._id):[];console.log(`ThreeToMongoDB: Saved ${c}`),r()}catch(e){a(e)}}async _parseObjects(e=[],t=null){const r=ThreeToMongoDB._arrayify(e);if(iteeValidators.isEmptyArray(r))return null;const o=[];let a=null;for(let e=0,n=r.length;e<n;e++)a=this._parseObject(r[e],t),o.push(a);return Promise.all(o)}async _parseObject(e,t=null){if(iteeValidators.isNotDefined(e))return null;const r=e.type,o=e.name,a=e.geometry,n=ThreeToMongoDB._arrayify(e.children),c=ThreeToMongoDB._arrayify(e.material);if(iteeValidators.isDefined(a)&&iteeValidators.isEmptyArray(n))if(a.isGeometry){const e=a.vertices;if(iteeValidators.isNotDefined(e)||iteeValidators.isEmptyArray(e))return console.error(`Leaf object ${o} have a geometry that doesn't contain vertices ! Skip it.`),null}else{if(!a.isBufferGeometry)return console.error(`Object ${o} contain an unknown/unmanaged geometry of type ${a.type} ! Skip it.`),null;{const e=a.attributes;if(iteeValidators.isNotDefined(e))return console.error(`Buffer geometry of ${o} doesn't contain attributes ! Skip it.`),null;const t=e.position;if(iteeValidators.isNotDefined(t)||0===t.count)return console.error(`Leaf object ${o} have a buffer geometry that doesn't contain position attribute ! Skip it.`),null}}let i=null;if(ThreeToMongoDB.AvailableLineTypes.includes(r)){if(iteeValidators.isNotDefined(a))return console.error(`Missing geometry for object ${e.name} of type ${r}. Only Sprite can contains material without geometry ! Skip it.`),null;i=ThreeToMongoDB.AvailableLineMaterialTypes}else if(ThreeToMongoDB.AvailablePointTypes.includes(r)){if(iteeValidators.isNotDefined(a))return console.error(`Missing geometry for object ${e.name} of type ${r}. Only Sprite can contains material without geometry ! Skip it.`),null;i=ThreeToMongoDB.AvailablePointMaterialTypes}else ThreeToMongoDB.AvailableSpriteTypes.includes(r)&&(i=ThreeToMongoDB.AvailableSpriteMaterialTypes);if(i)for(let e=0,t=c.length;e<t;e++){const t=c[e].type;if(!i.includes(t))return console.error(`Object ${o} of type ${r}, contain an invalid material of type ${t} ! Skip it.`),null}const m=this._getOrCreateDocuments(a),d=iteeValidators.isDefined(m)?m.filter(e=>e).map(e=>e._id).pop():null,s=this._getOrCreateDocuments(c),l=iteeValidators.isDefined(s)?s.filter(e=>e).map(e=>e._id):[];let $=this._readOneDocument(r,{uuid:e.uuid,parent:t});if(iteeValidators.isDefined($))if("add"===this.mergeStrategy){const e=this._parseObjects(n,$._id),t=iteeValidators.isDefined(e)?e.filter(e=>e).map(e=>e._id):[];this._updateDocument($,{$addToSet:{children:t}})}else if("replace"===this.mergeStrategy){const e=this._readManyDocument("Objects3D",{parent:$._id}),t=n.map(e=>e.uuid),r=e.filter(e=>!t.includes(e.uuid));this._removeChildrenDocuments(r);const o=this._parseObjects(n,$._id),a=iteeValidators.isDefined(o)?o.filter(e=>e).map(e=>e._id):[];this._updateDocument($,{$set:{children:a,geometry:d,material:l}})}else console.error(`Unknown/Unmanaged merge srategy ${this.mergeStrategy}`);else{e.parent=t,e.children=[],e.geometry=d,e.material=l,$=this._createDocument(e);const r=this._parseObjects(n,$._id),o=iteeValidators.isDefined(r)?r.filter(e=>e).map(e=>e._id):[];this._updateDocument($,{$set:{children:o,geometry:d,material:l}})}return $}_getOrCreateDocuments(e=[]){const t=ThreeToMongoDB._arrayify(e);if(iteeValidators.isEmptyArray(t))return null;const r=[];for(let e=0,o=t.length;e<o;e++){const o=this._getOrCreateDocument(t[e]);r.push(o)}return Promise.all(r)}_getOrCreateDocument(e){if(iteeValidators.isNotDefined(e))return null;let t=this._readOneDocument(e.type,{uuid:e.uuid});return t=iteeValidators.isDefined(t)?this._updateDocument(t,e):this._createDocument(e)}_createDocuments(e=[]){const t=ThreeToMongoDB._arrayify(e);if(iteeValidators.isEmptyArray(t))return null;const r=[];for(let e=0,o=t.length;e<o;e++){const o=this._createDocument(t[e]);r.push(o)}return r}async _createDocument(e){if(iteeValidators.isNotDefined(e))return null;const t=this._driver.model(e.type);return(await t(e).save())._doc}async _readOneDocument(e,t){if(iteeValidators.isNotDefined(e)||iteeValidators.isNotDefined(t))return null;const r=await this._driver.model(e).findOne(t).exec();return iteeValidators.isDefined(r)?r._doc:null}async _readManyDocument(e,t){return iteeValidators.isNotDefined(e)||iteeValidators.isNotDefined(t)?null:await this._driver.model(e).find(t).exec().map(e=>e._doc)}_updateDocuments(e=[],t,r){const o=ThreeToMongoDB._arrayify(e);if(iteeValidators.isEmptyArray(o))return null;const a=[];for(let e=0,n=o.length;e<n;e++){const n=this._updateDocument(o[e],t,r);a.push(n)}return a}async _updateDocument(e,t,r){return iteeValidators.isNotDefined(e)?null:await this._driver.model(e.type).findByIdAndUpdate(e._id,t,r).exec()}_deleteDocuments(e=[]){const t=ThreeToMongoDB._arrayify(e);if(iteeValidators.isEmptyArray(t))return null;const r=[];for(let e=0,o=t.length;e<o;e++){const o=this._deleteDocument(t[e]);r.push(o)}return r}async _deleteDocument(e){return iteeValidators.isNotDefined(e)?null:await this._driver.model(e.type).findByIdAndDelete(e._id).exec()}_removeChildrenDocuments(e){for(let t=e.length-1;t>=0;t--)this._removeChildDocument(e[t])}_removeChildDocument(e){const t=this._readManyDocument("Objects3D",{parent:e._id});this._removeChildrenDocuments(t),this._removeOrphanGeometryWithId(e.geometry),this._removeOrphanMaterialsWithIds(e.material||[]),this._deleteDocument(e)}_removeOrphanGeometryWithId(e){if(iteeValidators.isNotDefined(e))return;if(this._readManyDocument("Objects3D",{geometry:e}).length>1)return;const t=this._readOneDocument("Geometries",{_id:e});this._deleteDocument(t)}_removeOrphanMaterialsWithIds(e){const t=[];for(let r=0,o=e.length;r<o;r++){const o=e[r],a=this._removeOrphanMaterialWithId(o);t.push(a)}return t}_removeOrphanMaterialWithId(e){if(this._readManyDocument("Objects3D",{material:e}).length>1)return;const t=this._readOneDocument("Materials",{_id:e});this._deleteDocument(t)}}function Object3D(){}ThreeToMongoDB.AvailableCurveTypes=["Curve","ArcCurve","CatmullRomCurve3","CubicBezierCurve","CubicBezierCurve3","EllipseCurve","LineCurve","LineCurve3","QuadraticBezierCurve","QuadraticBezierCurve3","SplineCurve","CurvePath","Path","Shape"],ThreeToMongoDB.AvailableLineTypes=["Line","LineLoop","LineSegments"],ThreeToMongoDB.AvailableLineMaterialTypes=["LineBasicMaterial","LineDashedMaterial"],ThreeToMongoDB.AvailablePointTypes=["Points"],ThreeToMongoDB.AvailablePointMaterialTypes=["PointsMaterial"],ThreeToMongoDB.AvailableSpriteTypes=["Sprite"],ThreeToMongoDB.AvailableSpriteMaterialTypes=["SpriteMaterial"],Object3D.getSchemaFrom=e=>(Object3D._schema||Object3D._createSchema(e),Object3D._schema),Object3D._createSchema=e=>{const t=e.Schema,r=t.Types,o=r.ObjectId,a=r.Mixed,n=r.Vector3,c=r.Quaternion,i=r.Matrix4,m=r.Euler;Object3D._schema=new t({uuid:String,name:String,type:String,parent:o,children:[o],up:n,position:n,rotation:m,quaternion:c,scale:{type:n,default:{x:1,y:1,z:1}},modelViewMatrix:i,normalMatrix:i,matrix:i,matrixWorld:i,matrixAutoUpdate:Boolean,matrixWorldNeedsUpdate:Boolean,layers:{type:Number,set:e=>e.mask},visible:Boolean,castShadow:Boolean,receiveShadow:Boolean,frustumCulled:Boolean,renderOrder:Boolean,userData:{type:a,set:e=>{return function e(t){let r={};for(let o in t){if(!Object.prototype.hasOwnProperty.call(t,o))continue;let a=t[o];a.constructor===Object&&(a=e(a)),r[o.replace(/\./g,"")]=a}return r}(e)}}},{collection:"objects",discriminatorKey:"type"})},Object3D.getModelFrom=e=>(Object3D._model||Object3D._createModel(e),Object3D._model),Object3D._createModel=e=>{Object3D._model=e.model("Objects3D",Object3D.getSchemaFrom(e)),Object3D._model.discriminator("Object3D",new e.Schema({}))},Object3D.registerModelTo=e=>(Object3D._model||Object3D._createModel(e),e),Object3D._schema=null,Object3D._model=null;var Object3D$1=Object.freeze({Object3D:Object3D});const{Object3D:Object3D$2}=Object3D$1;let _schema=void 0,_model=void 0;function getSchemaFrom(e){return _schema||_createSchema(e),_schema}function _createSchema(e){const t=e.Schema;_schema=new t({})}function getModelFrom(e){return _model||_createModel(e),_model}function _createModel(e){const t=Object3D$2.getModelFrom(e);_model=t.discriminator("Audio",getSchemaFrom(e))}function registerModelTo(e){return _model||_createModel(e),e}var Audio_1={getSchemaFrom:getSchemaFrom,getModelFrom:getModelFrom,registerModelTo:registerModelTo};const{Object3D:Object3D$3}=Object3D$1;let _schema$1=void 0,_model$1=void 0;function getSchemaFrom$1(e){return _schema$1||_createSchema$1(e),_schema$1}function _createSchema$1(e){const t=e.Schema;_schema$1=new t({})}function getModelFrom$1(e){return _model$1||_createModel$1(e),_model$1}function _createModel$1(e){const t=Object3D$3.getModelFrom(e);_model$1=t.discriminator("AudioListener",getSchemaFrom$1(e))}function registerModelTo$1(e){return _model$1||_createModel$1(e),e}var AudioListener_1={getSchemaFrom:getSchemaFrom$1,getModelFrom:getModelFrom$1,registerModelTo:registerModelTo$1};const{Object3D:Object3D$4}=Object3D$1;let _schema$2=void 0,_model$2=void 0;function getSchemaFrom$2(e){return _schema$2||_createSchema$2(e),_schema$2}function _createSchema$2(e){const t=e.Schema;_schema$2=new t({})}function getModelFrom$2(e){return _model$2||_createModel$2(e),_model$2}function _createModel$2(e){const t=Object3D$4.getModelFrom(e);_model$2=t.discriminator("PositionalAudio",getSchemaFrom$2(e))}function registerModelTo$2(e){return _model$2||_createModel$2(e),e}var PositionalAudio_1={getSchemaFrom:getSchemaFrom$2,getModelFrom:getModelFrom$2,registerModelTo:registerModelTo$2};const{Object3D:Object3D$5}=Object3D$1;let _schema$3=void 0,_model$3=void 0;function getSchemaFrom$3(e){return _schema$3||_createSchema$3(e),_schema$3}function _createSchema$3(e){const t=e.Schema;_schema$3=new t({})}function getModelFrom$3(e){return _model$3||_createModel$3(e),_model$3}function _createModel$3(e){const t=Object3D$5.getModelFrom(e);_model$3=t.discriminator("ArrayCamera",getSchemaFrom$3(e))}function registerModelTo$3(e){return _model$3||_createModel$3(e),e}var ArrayCamera_1={getSchemaFrom:getSchemaFrom$3,getModelFrom:getModelFrom$3,registerModelTo:registerModelTo$3};const{Object3D:Object3D$6}=Object3D$1;let _schema$4=void 0,_model$4=void 0;function getSchemaFrom$4(e){return _schema$4||_createSchema$4(e),_schema$4}function _createSchema$4(e){const t=e.Schema;_schema$4=new t({})}function getModelFrom$4(e){return _model$4||_createModel$4(e),_model$4}function _createModel$4(e){const t=Object3D$6.getModelFrom(e);_model$4=t.discriminator("Camera",getSchemaFrom$4(e))}function registerModelTo$4(e){return _model$4||_createModel$4(e),e}var Camera_1={getSchemaFrom:getSchemaFrom$4,getModelFrom:getModelFrom$4,registerModelTo:registerModelTo$4};const{Object3D:Object3D$7}=Object3D$1;let _schema$5=void 0,_model$5=void 0;function getSchemaFrom$5(e){return _schema$5||_createSchema$5(e),_schema$5}function _createSchema$5(e){const t=e.Schema;_schema$5=new t({})}function getModelFrom$5(e){return _model$5||_createModel$5(e),_model$5}function _createModel$5(e){const t=Object3D$7.getModelFrom(e);_model$5=t.discriminator("CubeCamera",getSchemaFrom$5(e))}function registerModelTo$5(e){return _model$5||_createModel$5(e),e}var CubeCamera_1={getSchemaFrom:getSchemaFrom$5,getModelFrom:getModelFrom$5,registerModelTo:registerModelTo$5};const{Object3D:Object3D$8}=Object3D$1;let _schema$6=void 0,_model$6=void 0;function getSchemaFrom$6(e){return _schema$6||_createSchema$6(e),_schema$6}function _createSchema$6(e){const t=e.Schema;_schema$6=new t({})}function getModelFrom$6(e){return _model$6||_createModel$6(e),_model$6}function _createModel$6(e){const t=Object3D$8.getModelFrom(e);_model$6=t.discriminator("OrthographicCamera",getSchemaFrom$6(e))}function registerModelTo$6(e){return _model$6||_createModel$6(e),e}var OrthographicCamera_1={getSchemaFrom:getSchemaFrom$6,getModelFrom:getModelFrom$6,registerModelTo:registerModelTo$6};const{Object3D:Object3D$9}=Object3D$1;let _schema$7=void 0,_model$7=void 0;function getSchemaFrom$7(e){return _schema$7||_createSchema$7(e),_schema$7}function _createSchema$7(e){const t=e.Schema;_schema$7=new t({})}function getModelFrom$7(e){return _model$7||_createModel$7(e),_model$7}function _createModel$7(e){const t=Object3D$9.getModelFrom(e);_model$7=t.discriminator("PerspectiveCamera",getSchemaFrom$7(e))}function registerModelTo$7(e){return _model$7||_createModel$7(e),e}var PerspectiveCamera_1={getSchemaFrom:getSchemaFrom$7,getModelFrom:getModelFrom$7,registerModelTo:registerModelTo$7};const{isInt8Array:isInt8Array,isInt16Array:isInt16Array,isInt32Array:isInt32Array,isFloat32Array:isFloat32Array,isFloat64Array:isFloat64Array,isUint8Array:isUint8Array,isUint8ClampedArray:isUint8ClampedArray,isUint16Array:isUint16Array,isUint32Array:isUint32Array,isBigInt64Array:isBigInt64Array,isBigUint64Array:isBigUint64Array}=iteeValidators__default;let _schema$8=void 0;function getSchemaFrom$8(e){return _schema$8||_createSchema$8(e),_schema$8}function _createSchema$8(e){const t=e.Schema,r=t.Types.Mixed,o=0,a=1,n=2,c=3,i=4,m=5,d=6,s=7,l=8,$=9,h=10;_schema$8=new t({array:{type:Buffer,set:e=>{const t=e.length;let r=null,u=0;if(isInt8Array(e)){u=(r=Buffer.allocUnsafe(1+1*t)).writeUInt8(o,u);for(let o=0;o<t;o++)u=r.writeInt8(e[o],u)}else if(isUint8Array(e)){u=(r=Buffer.allocUnsafe(1+1*t)).writeUInt8(a,u);for(let o=0;o<t;o++)u=r.writeUInt8(e[o],u)}else if(isUint8ClampedArray(e)){u=(r=Buffer.allocUnsafe(1+1*t)).writeUInt8(n,u);for(let o=0;o<t;o++)u=r.writeUInt8(e[o],u)}else if(isInt16Array(e)){u=(r=Buffer.allocUnsafe(1+2*t)).writeUInt8(c,u);for(let o=0;o<t;o++)u=r.writeInt16BE(e[o],u)}else if(isUint16Array(e)){u=(r=Buffer.allocUnsafe(1+2*t)).writeUInt8(i,u);for(let o=0;o<t;o++)u=r.writeUInt16BE(e[o],u)}else if(isInt32Array(e)){u=(r=Buffer.allocUnsafe(1+4*t)).writeUInt8(m,u);for(let o=0;o<t;o++)u=r.writeInt32BE(e[o],u)}else if(isUint32Array(e)){u=(r=Buffer.allocUnsafe(1+4*t)).writeUInt8(d,u);for(let o=0;o<t;o++)u=r.writeUInt32BE(e[o],u)}else if(isFloat32Array(e)){u=(r=Buffer.allocUnsafe(1+4*t)).writeUInt8(s,u);for(let o=0;o<t;o++)u=r.writeFloatBE(e[o],u)}else if(isFloat64Array(e)){u=(r=Buffer.allocUnsafe(1+8*t)).writeUInt8(l,u);for(let o=0;o<t;o++)u=r.writeDoubleBE(e[o],u)}else if(isBigInt64Array(e)){u=(r=Buffer.allocUnsafe(1+8*t)).writeUInt8($,u);for(let o=0;o<t;o++)u=r.writeDoubleBE(e[o],u)}else{if(!isBigUint64Array(e))throw new Error("Unable to determine the array type to bufferize.");u=(r=Buffer.allocUnsafe(1+8*t)).writeUInt8(h,u);for(let o=0;o<t;o++)u=r.writeDoubleBE(e[o],u)}return r}},count:Number,dynamic:Boolean,itemSize:Number,name:String,needsUpdate:Boolean,normalized:Boolean,updateRange:r,uuid:String,version:Number},{_id:!1,id:!1})}var BufferAttribute_1={getSchemaFrom:getSchemaFrom$8,getModelFrom:()=>null,registerModelTo:e=>e},BufferAttribute={BufferAttribute:BufferAttribute_1};const{BufferAttribute:BufferAttribute$1}=BufferAttribute;let _schema$9=void 0,_model$8=void 0;function getSchemaFrom$9(e){return _schema$9||_createSchema$9(e),_schema$9}function _createSchema$9(e){const t=e.Schema,r=t.Types,o=r.Mixed,a=r.Vector3,n=BufferAttribute$1.getSchemaFrom(e);_schema$9=new t({uuid:String,name:String,type:String,index:n,attributes:{position:n,normal:n,color:n,uv:n},groups:o,boundingBox:{min:a,max:a},boundingSphere:{center:a,radius:Number},drawRange:o},{collection:"geometries",discriminatorKey:"type"})}function getModelFrom$8(e){return _model$8||_createModel$8(e),_model$8}function _createModel$8(e){(_model$8=e.model("BufferGeometries",getSchemaFrom$9(e))).discriminator("BufferGeometry",new e.Schema({}))}function registerModelTo$8(e){return _model$8||_createModel$8(e),e}var BufferGeometry_1={getSchemaFrom:getSchemaFrom$9,getModelFrom:getModelFrom$8,registerModelTo:registerModelTo$8},BufferGeometry={BufferGeometry:BufferGeometry_1};let _schema$a=void 0,_model$9=void 0;function getSchemaFrom$a(e){return _schema$a||_createSchema$a(e),_schema$a}function _createSchema$a(e){const t=e.Schema;_schema$a=new t({type:{type:String,default:"Curve"},arcLengthDivisions:Number},{collection:"curves",discriminatorKey:"type"})}function getModelFrom$9(e){return _model$9||_createModel$9(e),_model$9}function _createModel$9(e){(_model$9=e.model("Curves",getSchemaFrom$a(e))).discriminator("Curve",new e.Schema({}))}function registerModelTo$9(e){return _model$9||_createModel$9(e),e}var Curve_1={getSchemaFrom:getSchemaFrom$a,getModelFrom:getModelFrom$9,registerModelTo:registerModelTo$9},Curve={Curve:Curve_1};const{Curve:Curve$1}=Curve;let _schema$b=void 0,_model$a=void 0;function getSchemaFrom$b(e){return _schema$b||_createSchema$b(e),_schema$b}function _createSchema$b(e){const t=e.Schema,r=new t({type:{type:String,default:"Curve"},arcLengthDivisions:Number},{id:!1,_id:!1});_schema$b=new t({curves:[r],autoClose:{type:Boolean,default:!1}})}function getModelFrom$a(e){return _model$a||_createModel$a(e),_model$a}function _createModel$a(e){const t=Curve$1.getModelFrom(e);_model$a=t.discriminator("CurvePath",getSchemaFrom$b(e))}function registerModelTo$a(e){return _model$a||_createModel$a(e),e}var CurvePath_1={getSchemaFrom:getSchemaFrom$b,getModelFrom:getModelFrom$a,registerModelTo:registerModelTo$a};let _schema$c=void 0;function getSchemaFrom$c(e){return _schema$c||_createSchema$c(e),_schema$c}function _createSchema$c(e){const t=e.Schema,r=t.Types,o=r.Color,a=r.Vector3;_schema$c=new t({a:Number,b:Number,c:Number,normal:a,vertexNormals:[Number],color:o,vertexColors:[Number],materialIndex:Number},{_id:!1,id:!1})}var Face3_1={getSchemaFrom:getSchemaFrom$c,getModelFrom:()=>null,registerModelTo:e=>e};let _schema$d=void 0,_model$b=void 0;function getSchemaFrom$d(e){return _schema$d||_createSchema$d(e),_schema$d}function _createSchema$d(e){const t=Face3_1.getSchemaFrom(e),r=e.Schema,o=r.Types.Vector3;_schema$d=new r({uuid:String,name:String,type:String,vertices:[o],colors:[Number],faces:[t],faceVertexUvs:[[Number]],morphTargets:[Number],morphNormals:[Number],skinWeights:[Number],skinIndices:[Number],lineDistances:[Number],boundingBox:{min:o,max:o},boundingSphere:{center:o,radius:Number},elementsNeedUpdate:Boolean,verticesNeedUpdate:Boolean,uvsNeedUpdate:Boolean,normalsNeedUpdate:Boolean,colorsNeedUpdate:Boolean,lineDistancesNeedUpdate:Boolean,groupsNeedUpdate:Boolean},{collection:"geometries",discriminatorKey:"type"})}function getModelFrom$b(e){return _model$b||_createModel$b(e),_model$b}function _createModel$b(e){(_model$b=e.model("Geometries",getSchemaFrom$d(e))).discriminator("Geometry",new e.Schema({}))}function registerModelTo$b(e){return _model$b||_createModel$b(e),e}const Geometry={getSchemaFrom:getSchemaFrom$d,getModelFrom:getModelFrom$b,registerModelTo:registerModelTo$b};var Geometry$1=Object.freeze({Geometry:Geometry});const{Curve:Curve$2}=Curve;let _schema$e=void 0,_model$c=void 0;function getSchemaFrom$e(e){return _schema$e||_createSchema$e(e),_schema$e}function _createSchema$e(e){const t=e.Schema,r=t.Types.Vector2,o=new t({type:{type:String,default:"Curve"},arcLengthDivisions:Number},{id:!1,_id:!1});_schema$e=new t({curves:[o],autoClose:{type:Boolean,default:!1},currentPoint:r})}function getModelFrom$c(e){return _model$c||_createModel$c(e),_model$c}function _createModel$c(e){const t=Curve$2.getModelFrom(e);_model$c=t.discriminator("Path",getSchemaFrom$e(e))}function registerModelTo$c(e){return _model$c||_createModel$c(e),e}var Path_1={getSchemaFrom:getSchemaFrom$e,getModelFrom:getModelFrom$c,registerModelTo:registerModelTo$c};const{Curve:Curve$3}=Curve;let _schema$f=void 0,_model$d=void 0;function getSchemaFrom$f(e){return _schema$f||_createSchema$f(e),_schema$f}function _createSchema$f(e){const t=e.Schema,r=t.Types.Vector2,o=new t({type:{type:String,default:"Curve"},arcLengthDivisions:Number},{id:!1,_id:!1}),a=new t({curves:[o],autoClose:{type:Boolean,default:!1},currentPoint:r},{id:!1,_id:!1});_schema$f=new t({curves:[o],autoClose:{type:Boolean,default:!1},currentPoint:r,uuid:String,holes:[a]})}function getModelFrom$d(e){return _model$d||_createModel$d(e),_model$d}function _createModel$d(e){const t=Curve$3.getModelFrom(e);_model$d=t.discriminator("Shape",getSchemaFrom$f(e))}function registerModelTo$d(e){return _model$d||_createModel$d(e),e}var Shape_1={getSchemaFrom:getSchemaFrom$f,getModelFrom:getModelFrom$d,registerModelTo:registerModelTo$d};const{Curve:Curve$4}=Curve;let _schema$g=void 0,_model$e=void 0;function getSchemaFrom$g(e){return _schema$g||_createSchema$g(e),_schema$g}function _createSchema$g(e){const t=e.Schema;_schema$g=new t({aX:Number,aY:Number,xRadius:Number,yRadius:Number,aStartAngle:Number,aEndAngle:Number,aClockwise:Boolean,aRotation:Number})}function getModelFrom$e(e){return _model$e||_createModel$e(e),_model$e}function _createModel$e(e){const t=Curve$4.getModelFrom(e);_model$e=t.discriminator("ArcCurve",getSchemaFrom$g(e))}function registerModelTo$e(e){return _model$e||_createModel$e(e),e}var ArcCurve_1={getSchemaFrom:getSchemaFrom$g,getModelFrom:getModelFrom$e,registerModelTo:registerModelTo$e};const{Curve:Curve$5}=Curve;let _schema$h=void 0,_model$f=void 0;function getSchemaFrom$h(e){return _schema$h||_createSchema$h(e),_schema$h}function _createSchema$h(e){const t=e.Schema,r=t.Types.Vector3;_schema$h=new t({points:[r],closed:Boolean,curveType:String,tension:Number})}function getModelFrom$f(e){return _model$f||_createModel$f(e),_model$f}function _createModel$f(e){const t=Curve$5.getModelFrom(e);_model$f=t.discriminator("CatmullRomCurve3",getSchemaFrom$h(e))}function registerModelTo$f(e){return _model$f||_createModel$f(e),e}var CatmullRomCurve3_1={getSchemaFrom:getSchemaFrom$h,getModelFrom:getModelFrom$f,registerModelTo:registerModelTo$f};const{Curve:Curve$6}=Curve;let _schema$i=void 0,_model$g=void 0;function getSchemaFrom$i(e){return _schema$i||_createSchema$i(e),_schema$i}function _createSchema$i(e){const t=e.Schema,r=t.Types.Vector2;_schema$i=new t({v0:r,v1:r,v2:r,v3:r})}function getModelFrom$g(e){return _model$g||_createModel$g(e),_model$g}function _createModel$g(e){const t=Curve$6.getModelFrom(e);_model$g=t.discriminator("CubicBezierCurve",getSchemaFrom$i(e))}function registerModelTo$g(e){return _model$g||_createModel$g(e),e}var CubicBezierCurve_1={getSchemaFrom:getSchemaFrom$i,getModelFrom:getModelFrom$g,registerModelTo:registerModelTo$g};const{Curve:Curve$7}=Curve;let _schema$j=void 0,_model$h=void 0;function getSchemaFrom$j(e){return _schema$j||_createSchema$j(e),_schema$j}function _createSchema$j(e){const t=e.Schema,r=t.Types.Vector3;_schema$j=new t({v0:r,v1:r,v2:r,v3:r})}function getModelFrom$h(e){return _model$h||_createModel$h(e),_model$h}function _createModel$h(e){const t=Curve$7.getModelFrom(e);_model$h=t.discriminator("CubicBezierCurve3",getSchemaFrom$j(e))}function registerModelTo$h(e){return _model$h||_createModel$h(e),e}var CubicBezierCurve3_1={getSchemaFrom:getSchemaFrom$j,getModelFrom:getModelFrom$h,registerModelTo:registerModelTo$h};const{Curve:Curve$8}=Curve;let _schema$k=void 0,_model$i=void 0;function getSchemaFrom$k(e){return _schema$k||_createSchema$k(e),_schema$k}function _createSchema$k(e){const t=e.Schema;_schema$k=new t({})}function getModelFrom$i(e){return _model$i||_createModel$i(e),_model$i}function _createModel$i(e){const t=Curve$8.getModelFrom(e);_model$i=t.discriminator("CurveExtras",getSchemaFrom$k(e))}function registerModelTo$i(e){return _model$i||_createModel$i(e),e}var CurveExtras_1={getSchemaFrom:getSchemaFrom$k,getModelFrom:getModelFrom$i,registerModelTo:registerModelTo$i};const{Curve:Curve$9}=Curve;let _schema$l=void 0,_model$j=void 0;function getSchemaFrom$l(e){return _schema$l||_createSchema$l(e),_schema$l}function _createSchema$l(e){const t=e.Schema;_schema$l=new t({aX:Number,aY:Number,xRadius:Number,yRadius:Number,aStartAngle:Number,aEndAngle:Number,aClockwise:Boolean,aRotation:Number})}function getModelFrom$j(e){return _model$j||_createModel$j(e),_model$j}function _createModel$j(e){const t=Curve$9.getModelFrom(e);_model$j=t.discriminator("EllipseCurve",getSchemaFrom$l(e))}function registerModelTo$j(e){return _model$j||_createModel$j(e),e}var EllipseCurve_1={getSchemaFrom:getSchemaFrom$l,getModelFrom:getModelFrom$j,registerModelTo:registerModelTo$j};const{Curve:Curve$a}=Curve;let _schema$m=void 0,_model$k=void 0;function getSchemaFrom$m(e){return _schema$m||_createSchema$m(e),_schema$m}function _createSchema$m(e){const t=e.Schema,r=t.Types.Vector2;_schema$m=new t({v0:r,v1:r})}function getModelFrom$k(e){return _model$k||_createModel$k(e),_model$k}function _createModel$k(e){const t=Curve$a.getModelFrom(e);_model$k=t.discriminator("LineCurve",getSchemaFrom$m(e))}function registerModelTo$k(e){return _model$k||_createModel$k(e),e}var LineCurve_1={getSchemaFrom:getSchemaFrom$m,getModelFrom:getModelFrom$k,registerModelTo:registerModelTo$k};const{Curve:Curve$b}=Curve;let _schema$n=void 0,_model$l=void 0;function getSchemaFrom$n(e){return _schema$n||_createSchema$n(e),_schema$n}function _createSchema$n(e){const t=e.Schema,r=t.Types.Vector3;_schema$n=new t({v0:r,v1:r})}function getModelFrom$l(e){return _model$l||_createModel$l(e),_model$l}function _createModel$l(e){const t=Curve$b.getModelFrom(e);_model$l=t.discriminator("LineCurve3",getSchemaFrom$n(e))}function registerModelTo$l(e){return _model$l||_createModel$l(e),e}var LineCurve3_1={getSchemaFrom:getSchemaFrom$n,getModelFrom:getModelFrom$l,registerModelTo:registerModelTo$l};const{Curve:Curve$c}=Curve;let _schema$o=void 0,_model$m=void 0;function getSchemaFrom$o(e){return _schema$o||_createSchema$o(e),_schema$o}function _createSchema$o(e){const t=e.Schema;_schema$o=new t({})}function getModelFrom$m(e){return _model$m||_createModel$m(e),_model$m}function _createModel$m(e){const t=Curve$c.getModelFrom(e);_model$m=t.discriminator("NURBSCurve",getSchemaFrom$o(e))}function registerModelTo$m(e){return _model$m||_createModel$m(e),e}var NURBSCurve_1={getSchemaFrom:getSchemaFrom$o,getModelFrom:getModelFrom$m,registerModelTo:registerModelTo$m};const{Curve:Curve$d}=Curve;let _schema$p=void 0,_model$n=void 0;function getSchemaFrom$p(e){return _schema$p||_createSchema$p(e),_schema$p}function _createSchema$p(e){const t=e.Schema;_schema$p=new t({})}function getModelFrom$n(e){return _model$n||_createModel$n(e),_model$n}function _createModel$n(e){const t=Curve$d.getModelFrom(e);_model$n=t.discriminator("NURBSSurface",getSchemaFrom$p(e))}function registerModelTo$n(e){return _model$n||_createModel$n(e),e}var NURBSSurface_1={getSchemaFrom:getSchemaFrom$p,getModelFrom:getModelFrom$n,registerModelTo:registerModelTo$n};const{Curve:Curve$e}=Curve;let _schema$q=void 0,_model$o=void 0;function getSchemaFrom$q(e){return _schema$q||_createSchema$q(e),_schema$q}function _createSchema$q(e){const t=e.Schema,r=t.Types.Vector2;_schema$q=new t({v0:r,v1:r,v2:r})}function getModelFrom$o(e){return _model$o||_createModel$o(e),_model$o}function _createModel$o(e){const t=Curve$e.getModelFrom(e);_model$o=t.discriminator("QuadraticBezierCurve",getSchemaFrom$q(e))}function registerModelTo$o(e){return _model$o||_createModel$o(e),e}var QuadraticBezierCurve_1={getSchemaFrom:getSchemaFrom$q,getModelFrom:getModelFrom$o,registerModelTo:registerModelTo$o};const{Curve:Curve$f}=Curve;let _schema$r=void 0,_model$p=void 0;function getSchemaFrom$r(e){return _schema$r||_createSchema$r(e),_schema$r}function _createSchema$r(e){const t=e.Schema,r=t.Types.Vector3;_schema$r=new t({v0:r,v1:r,v2:r})}function getModelFrom$p(e){return _model$p||_createModel$p(e),_model$p}function _createModel$p(e){const t=Curve$f.getModelFrom(e);_model$p=t.discriminator("QuadraticBezierCurve3",getSchemaFrom$r(e))}function registerModelTo$p(e){return _model$p||_createModel$p(e),e}var QuadraticBezierCurve3_1={getSchemaFrom:getSchemaFrom$r,getModelFrom:getModelFrom$p,registerModelTo:registerModelTo$p};const{Curve:Curve$g}=Curve;let _schema$s=void 0,_model$q=void 0;function getSchemaFrom$s(e){return _schema$s||_createSchema$s(e),_schema$s}function _createSchema$s(e){const t=e.Schema,r=t.Types.Vector3;_schema$s=new t({points:[r]})}function getModelFrom$q(e){return _model$q||_createModel$q(e),_model$q}function _createModel$q(e){const t=Curve$g.getModelFrom(e);_model$q=t.discriminator("SplineCurve",getSchemaFrom$s(e))}function registerModelTo$q(e){return _model$q||_createModel$q(e),e}var SplineCurve_1={getSchemaFrom:getSchemaFrom$s,getModelFrom:getModelFrom$q,registerModelTo:registerModelTo$q};const{BufferGeometry:BufferGeometry$1}=BufferGeometry;let _schema$t=void 0,_model$r=void 0;function getSchemaFrom$t(e){return _schema$t||_createSchema$t(e),_schema$t}function _createSchema$t(e){const t=e.Schema;_schema$t=new t({})}function getModelFrom$r(e){return _model$r||_createModel$r(e),_model$r}function _createModel$r(e){const t=BufferGeometry$1.getModelFrom(e);_model$r=t.discriminator("BoxBufferGeometry",getSchemaFrom$t(e))}function registerModelTo$r(e){return _model$r||_createModel$r(e),e}var BoxBufferGeometry_1={getSchemaFrom:getSchemaFrom$t,getModelFrom:getModelFrom$r,registerModelTo:registerModelTo$r};const{Geometry:Geometry$2}=Geometry$1;let _schema$u=void 0,_model$s=void 0;function getSchemaFrom$u(e){return _schema$u||_createSchema$u(e),_schema$u}function _createSchema$u(e){const t=e.Schema;_schema$u=new t({})}function getModelFrom$s(e){return _model$s||_createModel$s(e),_model$s}function _createModel$s(e){const t=Geometry$2.getModelFrom(e);_model$s=t.discriminator("BoxGeometry",getSchemaFrom$u(e))}function registerModelTo$s(e){return _model$s||_createModel$s(e),e}var BoxGeometry_1={getSchemaFrom:getSchemaFrom$u,getModelFrom:getModelFrom$s,registerModelTo:registerModelTo$s};const{BufferGeometry:BufferGeometry$2}=BufferGeometry;let _schema$v=void 0,_model$t=void 0;function getSchemaFrom$v(e){return _schema$v||_createSchema$v(e),_schema$v}function _createSchema$v(e){const t=e.Schema;_schema$v=new t({})}function getModelFrom$t(e){return _model$t||_createModel$t(e),_model$t}function _createModel$t(e){const t=BufferGeometry$2.getModelFrom(e);_model$t=t.discriminator("CircleBufferGeometry",getSchemaFrom$v(e))}function registerModelTo$t(e){return _model$t||_createModel$t(e),e}var CircleBufferGeometry_1={getSchemaFrom:getSchemaFrom$v,getModelFrom:getModelFrom$t,registerModelTo:registerModelTo$t};const{Geometry:Geometry$3}=Geometry$1;let _schema$w=void 0,_model$u=void 0;function getSchemaFrom$w(e){return _schema$w||_createSchema$w(e),_schema$w}function _createSchema$w(e){const t=e.Schema;_schema$w=new t({})}function getModelFrom$u(e){return _model$u||_createModel$u(e),_model$u}function _createModel$u(e){const t=Geometry$3.getModelFrom(e);_model$u=t.discriminator("CircleGeometry",getSchemaFrom$w(e))}function registerModelTo$u(e){return _model$u||_createModel$u(e),e}var CircleGeometry_1={getSchemaFrom:getSchemaFrom$w,getModelFrom:getModelFrom$u,registerModelTo:registerModelTo$u};const{BufferGeometry:BufferGeometry$3}=BufferGeometry;let _schema$x=void 0,_model$v=void 0;function getSchemaFrom$x(e){return _schema$x||_createSchema$x(e),_schema$x}function _createSchema$x(e){const t=e.Schema;_schema$x=new t({})}function getModelFrom$v(e){return _model$v||_createModel$v(e),_model$v}function _createModel$v(e){const t=BufferGeometry$3.getModelFrom(e);_model$v=t.discriminator("ConeBufferGeometry",getSchemaFrom$x(e))}function registerModelTo$v(e){return _model$v||_createModel$v(e),e}var ConeBufferGeometry_1={getSchemaFrom:getSchemaFrom$x,getModelFrom:getModelFrom$v,registerModelTo:registerModelTo$v};const{Geometry:Geometry$4}=Geometry$1;let _schema$y=void 0,_model$w=void 0;function getSchemaFrom$y(e){return _schema$y||_createSchema$y(e),_schema$y}function _createSchema$y(e){const t=e.Schema;_schema$y=new t({})}function getModelFrom$w(e){return _model$w||_createModel$w(e),_model$w}function _createModel$w(e){const t=Geometry$4.getModelFrom(e);_model$w=t.discriminator("ConeGeometry",getSchemaFrom$y(e))}function registerModelTo$w(e){return _model$w||_createModel$w(e),e}var ConeGeometry_1={getSchemaFrom:getSchemaFrom$y,getModelFrom:getModelFrom$w,registerModelTo:registerModelTo$w};const{Geometry:Geometry$5}=Geometry$1;let _schema$z=void 0,_model$x=void 0;function getSchemaFrom$z(e){return _schema$z||_createSchema$z(e),_schema$z}function _createSchema$z(e){const t=e.Schema;_schema$z=new t({})}function getModelFrom$x(e){return _model$x||_createModel$x(e),_model$x}function _createModel$x(e){const t=Geometry$5.getModelFrom(e);_model$x=t.discriminator("ConvexGeometry",getSchemaFrom$z(e))}function registerModelTo$x(e){return _model$x||_createModel$x(e),e}var ConvexGeometry_1={getSchemaFrom:getSchemaFrom$z,getModelFrom:getModelFrom$x,registerModelTo:registerModelTo$x};const{BufferGeometry:BufferGeometry$4}=BufferGeometry;let _schema$A=void 0,_model$y=void 0;function getSchemaFrom$A(e){return _schema$A||_createSchema$A(e),_schema$A}function _createSchema$A(e){const t=e.Schema;_schema$A=new t({})}function getModelFrom$y(e){return _model$y||_createModel$y(e),_model$y}function _createModel$y(e){const t=BufferGeometry$4.getModelFrom(e);_model$y=t.discriminator("CylinderBufferGeometry",getSchemaFrom$A(e))}function registerModelTo$y(e){return _model$y||_createModel$y(e),e}var CylinderBufferGeometry_1={getSchemaFrom:getSchemaFrom$A,getModelFrom:getModelFrom$y,registerModelTo:registerModelTo$y};const{Geometry:Geometry$6}=Geometry$1;let _schema$B=void 0,_model$z=void 0;function getSchemaFrom$B(e){return _schema$B||_createSchema$B(e),_schema$B}function _createSchema$B(e){const t=e.Schema;_schema$B=new t({})}function getModelFrom$z(e){return _model$z||_createModel$z(e),_model$z}function _createModel$z(e){const t=Geometry$6.getModelFrom(e);_model$z=t.discriminator("CylinderGeometry",getSchemaFrom$B(e))}function registerModelTo$z(e){return _model$z||_createModel$z(e),e}var CylinderGeometry_1={getSchemaFrom:getSchemaFrom$B,getModelFrom:getModelFrom$z,registerModelTo:registerModelTo$z};const{Geometry:Geometry$7}=Geometry$1;let _schema$C=void 0,_model$A=void 0;function getSchemaFrom$C(e){return _schema$C||_createSchema$C(e),_schema$C}function _createSchema$C(e){const t=e.Schema;_schema$C=new t({})}function getModelFrom$A(e){return _model$A||_createModel$A(e),_model$A}function _createModel$A(e){const t=Geometry$7.getModelFrom(e);_model$A=t.discriminator("DecalGeometry",getSchemaFrom$C(e))}function registerModelTo$A(e){return _model$A||_createModel$A(e),e}var DecalGeometry_1={getSchemaFrom:getSchemaFrom$C,getModelFrom:getModelFrom$A,registerModelTo:registerModelTo$A};const{Geometry:Geometry$8}=Geometry$1;let _schema$D=void 0,_model$B=void 0;function getSchemaFrom$D(e){return _schema$D||_createSchema$D(e),_schema$D}function _createSchema$D(e){const t=e.Schema;_schema$D=new t({})}function getModelFrom$B(e){return _model$B||_createModel$B(e),_model$B}function _createModel$B(e){const t=Geometry$8.getModelFrom(e);_model$B=t.discriminator("DodecahedronGeometry",getSchemaFrom$D(e))}function registerModelTo$B(e){return _model$B||_createModel$B(e),e}var DodecahedronGeometry_1={getSchemaFrom:getSchemaFrom$D,getModelFrom:getModelFrom$B,registerModelTo:registerModelTo$B};const{Geometry:Geometry$9}=Geometry$1;let _schema$E=void 0,_model$C=void 0;function getSchemaFrom$E(e){return _schema$E||_createSchema$E(e),_schema$E}function _createSchema$E(e){const t=e.Schema;_schema$E=new t({})}function getModelFrom$C(e){return _model$C||_createModel$C(e),_model$C}function _createModel$C(e){const t=Geometry$9.getModelFrom(e);_model$C=t.discriminator("EdgesGeometry",getSchemaFrom$E(e))}function registerModelTo$C(e){return _model$C||_createModel$C(e),e}var EdgesGeometry_1={getSchemaFrom:getSchemaFrom$E,getModelFrom:getModelFrom$C,registerModelTo:registerModelTo$C};const{BufferGeometry:BufferGeometry$5}=BufferGeometry;let _schema$F=void 0,_model$D=void 0;function getSchemaFrom$F(e){return _schema$F||_createSchema$F(e),_schema$F}function _createSchema$F(e){const t=e.Schema;_schema$F=new t({})}function getModelFrom$D(e){return _model$D||_createModel$D(e),_model$D}function _createModel$D(e){const t=BufferGeometry$5.getModelFrom(e);_model$D=t.discriminator("ExtrudeBufferGeometry",getSchemaFrom$F(e))}function registerModelTo$D(e){return _model$D||_createModel$D(e),e}var ExtrudeBufferGeometry_1={getSchemaFrom:getSchemaFrom$F,getModelFrom:getModelFrom$D,registerModelTo:registerModelTo$D};const{Geometry:Geometry$a}=Geometry$1;let _schema$G=void 0,_model$E=void 0;function getSchemaFrom$G(e){return _schema$G||_createSchema$G(e),_schema$G}function _createSchema$G(e){const t=e.Schema;_schema$G=new t({})}function getModelFrom$E(e){return _model$E||_createModel$E(e),_model$E}function _createModel$E(e){const t=Geometry$a.getModelFrom(e);_model$E=t.discriminator("ExtrudeGeometry",getSchemaFrom$G(e))}function registerModelTo$E(e){return _model$E||_createModel$E(e),e}var ExtrudeGeometry_1={getSchemaFrom:getSchemaFrom$G,getModelFrom:getModelFrom$E,registerModelTo:registerModelTo$E};const{BufferGeometry:BufferGeometry$6}=BufferGeometry;let _schema$H=void 0,_model$F=void 0;function getSchemaFrom$H(e){return _schema$H||_createSchema$H(e),_schema$H}function _createSchema$H(e){const t=e.Schema;_schema$H=new t({})}function getModelFrom$F(e){return _model$F||_createModel$F(e),_model$F}function _createModel$F(e){const t=BufferGeometry$6.getModelFrom(e);_model$F=t.discriminator("IcosahedronBufferGeometry",getSchemaFrom$H(e))}function registerModelTo$F(e){return _model$F||_createModel$F(e),e}var IcosahedronBufferGeometry_1={getSchemaFrom:getSchemaFrom$H,getModelFrom:getModelFrom$F,registerModelTo:registerModelTo$F};const{Geometry:Geometry$b}=Geometry$1;let _schema$I=void 0,_model$G=void 0;function getSchemaFrom$I(e){return _schema$I||_createSchema$I(e),_schema$I}function _createSchema$I(e){const t=e.Schema;_schema$I=new t({})}function getModelFrom$G(e){return _model$G||_createModel$G(e),_model$G}function _createModel$G(e){const t=Geometry$b.getModelFrom(e);_model$G=t.discriminator("IcosahedronGeometry",getSchemaFrom$I(e))}function registerModelTo$G(e){return _model$G||_createModel$G(e),e}var IcosahedronGeometry_1={getSchemaFrom:getSchemaFrom$I,getModelFrom:getModelFrom$G,registerModelTo:registerModelTo$G};const{BufferGeometry:BufferGeometry$7}=BufferGeometry;let _schema$J=void 0,_model$H=void 0;function getSchemaFrom$J(e){return _schema$J||_createSchema$J(e),_schema$J}function _createSchema$J(e){const t=e.Schema;_schema$J=new t({})}function getModelFrom$H(e){return _model$H||_createModel$H(e),_model$H}function _createModel$H(e){const t=BufferGeometry$7.getModelFrom(e);_model$H=t.discriminator("InstancedBufferGeometry",getSchemaFrom$J(e))}function registerModelTo$H(e){return _model$H||_createModel$H(e),e}var InstancedBufferGeometry_1={getSchemaFrom:getSchemaFrom$J,getModelFrom:getModelFrom$H,registerModelTo:registerModelTo$H};const{BufferGeometry:BufferGeometry$8}=BufferGeometry;let _schema$K=void 0,_model$I=void 0;function getSchemaFrom$K(e){return _schema$K||_createSchema$K(e),_schema$K}function _createSchema$K(e){const t=e.Schema;_schema$K=new t({})}function getModelFrom$I(e){return _model$I||_createModel$I(e),_model$I}function _createModel$I(e){const t=BufferGeometry$8.getModelFrom(e);_model$I=t.discriminator("LatheBufferGeometry",getSchemaFrom$K(e))}function registerModelTo$I(e){return _model$I||_createModel$I(e),e}var LatheBufferGeometry_1={getSchemaFrom:getSchemaFrom$K,getModelFrom:getModelFrom$I,registerModelTo:registerModelTo$I};const{Geometry:Geometry$c}=Geometry$1;let _schema$L=void 0,_model$J=void 0;function getSchemaFrom$L(e){return _schema$L||_createSchema$L(e),_schema$L}function _createSchema$L(e){const t=e.Schema;_schema$L=new t({})}function getModelFrom$J(e){return _model$J||_createModel$J(e),_model$J}function _createModel$J(e){const t=Geometry$c.getModelFrom(e);_model$J=t.discriminator("LatheGeometry",getSchemaFrom$L(e))}function registerModelTo$J(e){return _model$J||_createModel$J(e),e}var LatheGeometry_1={getSchemaFrom:getSchemaFrom$L,getModelFrom:getModelFrom$J,registerModelTo:registerModelTo$J};const{BufferGeometry:BufferGeometry$9}=BufferGeometry;let _schema$M=void 0,_model$K=void 0;function getSchemaFrom$M(e){return _schema$M||_createSchema$M(e),_schema$M}function _createSchema$M(e){const t=e.Schema;_schema$M=new t({})}function getModelFrom$K(e){return _model$K||_createModel$K(e),_model$K}function _createModel$K(e){const t=BufferGeometry$9.getModelFrom(e);_model$K=t.discriminator("OctahedronBufferGeometry",getSchemaFrom$M(e))}function registerModelTo$K(e){return _model$K||_createModel$K(e),e}var OctahedronBufferGeometry_1={getSchemaFrom:getSchemaFrom$M,getModelFrom:getModelFrom$K,registerModelTo:registerModelTo$K};const{Geometry:Geometry$d}=Geometry$1;let _schema$N=void 0,_model$L=void 0;function getSchemaFrom$N(e){return _schema$N||_createSchema$N(e),_schema$N}function _createSchema$N(e){const t=e.Schema;_schema$N=new t({})}function getModelFrom$L(e){return _model$L||_createModel$L(e),_model$L}function _createModel$L(e){const t=Geometry$d.getModelFrom(e);_model$L=t.discriminator("OctahedronGeometry",getSchemaFrom$N(e))}function registerModelTo$L(e){return _model$L||_createModel$L(e),e}var OctahedronGeometry_1={getSchemaFrom:getSchemaFrom$N,getModelFrom:getModelFrom$L,registerModelTo:registerModelTo$L};const{BufferGeometry:BufferGeometry$a}=BufferGeometry;let _schema$O=void 0,_model$M=void 0;function getSchemaFrom$O(e){return _schema$O||_createSchema$O(e),_schema$O}function _createSchema$O(e){const t=e.Schema;_schema$O=new t({})}function getModelFrom$M(e){return _model$M||_createModel$M(e),_model$M}function _createModel$M(e){const t=BufferGeometry$a.getModelFrom(e);_model$M=t.discriminator("ParametricBufferGeometry",getSchemaFrom$O(e))}function registerModelTo$M(e){return _model$M||_createModel$M(e),e}var ParametricBufferGeometry_1={getSchemaFrom:getSchemaFrom$O,getModelFrom:getModelFrom$M,registerModelTo:registerModelTo$M};const{Geometry:Geometry$e}=Geometry$1;let _schema$P=void 0,_model$N=void 0;function getSchemaFrom$P(e){return _schema$P||_createSchema$P(e),_schema$P}function _createSchema$P(e){const t=e.Schema;_schema$P=new t({})}function getModelFrom$N(e){return _model$N||_createModel$N(e),_model$N}function _createModel$N(e){const t=Geometry$e.getModelFrom(e);_model$N=t.discriminator("ParametricGeometry",getSchemaFrom$P(e))}function registerModelTo$N(e){return _model$N||_createModel$N(e),e}var ParametricGeometry_1={getSchemaFrom:getSchemaFrom$P,getModelFrom:getModelFrom$N,registerModelTo:registerModelTo$N};const{BufferGeometry:BufferGeometry$b}=BufferGeometry;let _schema$Q=void 0,_model$O=void 0;function getSchemaFrom$Q(e){return _schema$Q||_createSchema$Q(e),_schema$Q}function _createSchema$Q(e){const t=e.Schema;_schema$Q=new t({})}function getModelFrom$O(e){return _model$O||_createModel$O(e),_model$O}function _createModel$O(e){const t=BufferGeometry$b.getModelFrom(e);_model$O=t.discriminator("PlaneBufferGeometry",getSchemaFrom$Q(e))}function registerModelTo$O(e){return _model$O||_createModel$O(e),e}var PlaneBufferGeometry_1={getSchemaFrom:getSchemaFrom$Q,getModelFrom:getModelFrom$O,registerModelTo:registerModelTo$O};const{Geometry:Geometry$f}=Geometry$1;let _schema$R=void 0,_model$P=void 0;function getSchemaFrom$R(e){return _schema$R||_createSchema$R(e),_schema$R}function _createSchema$R(e){const t=e.Schema;_schema$R=new t({})}function getModelFrom$P(e){return _model$P||_createModel$P(e),_model$P}function _createModel$P(e){const t=Geometry$f.getModelFrom(e);_model$P=t.discriminator("PlaneGeometry",getSchemaFrom$R(e))}function registerModelTo$P(e){return _model$P||_createModel$P(e),e}var PlaneGeometry_1={getSchemaFrom:getSchemaFrom$R,getModelFrom:getModelFrom$P,registerModelTo:registerModelTo$P};const{BufferGeometry:BufferGeometry$c}=BufferGeometry;let _schema$S=void 0,_model$Q=void 0;function getSchemaFrom$S(e){return _schema$S||_createSchema$S(e),_schema$S}function _createSchema$S(e){const t=e.Schema;_schema$S=new t({})}function getModelFrom$Q(e){return _model$Q||_createModel$Q(e),_model$Q}function _createModel$Q(e){const t=BufferGeometry$c.getModelFrom(e);_model$Q=t.discriminator("PolyhedronBufferGeometry",getSchemaFrom$S(e))}function registerModelTo$Q(e){return _model$Q||_createModel$Q(e),e}var PolyhedronBufferGeometry_1={getSchemaFrom:getSchemaFrom$S,getModelFrom:getModelFrom$Q,registerModelTo:registerModelTo$Q};const{Geometry:Geometry$g}=Geometry$1;let _schema$T=void 0,_model$R=void 0;function getSchemaFrom$T(e){return _schema$T||_createSchema$T(e),_schema$T}function _createSchema$T(e){const t=e.Schema;_schema$T=new t({})}function getModelFrom$R(e){return _model$R||_createModel$R(e),_model$R}function _createModel$R(e){const t=Geometry$g.getModelFrom(e);_model$R=t.discriminator("PolyhedronGeometry",getSchemaFrom$T(e))}function registerModelTo$R(e){return _model$R||_createModel$R(e),e}var PolyhedronGeometry_1={getSchemaFrom:getSchemaFrom$T,getModelFrom:getModelFrom$R,registerModelTo:registerModelTo$R};const{BufferGeometry:BufferGeometry$d}=BufferGeometry;let _schema$U=void 0,_model$S=void 0;function getSchemaFrom$U(e){return _schema$U||_createSchema$U(e),_schema$U}function _createSchema$U(e){const t=e.Schema;_schema$U=new t({})}function getModelFrom$S(e){return _model$S||_createModel$S(e),_model$S}function _createModel$S(e){const t=BufferGeometry$d.getModelFrom(e);_model$S=t.discriminator("RingBufferGeometry",getSchemaFrom$U(e))}function registerModelTo$S(e){return _model$S||_createModel$S(e),e}var RingBufferGeometry_1={getSchemaFrom:getSchemaFrom$U,getModelFrom:getModelFrom$S,registerModelTo:registerModelTo$S};const{Geometry:Geometry$h}=Geometry$1;let _schema$V=void 0,_model$T=void 0;function getSchemaFrom$V(e){return _schema$V||_createSchema$V(e),_schema$V}function _createSchema$V(e){const t=e.Schema;_schema$V=new t({})}function getModelFrom$T(e){return _model$T||_createModel$T(e),_model$T}function _createModel$T(e){const t=Geometry$h.getModelFrom(e);_model$T=t.discriminator("RingGeometry",getSchemaFrom$V(e))}function registerModelTo$T(e){return _model$T||_createModel$T(e),e}var RingGeometry_1={getSchemaFrom:getSchemaFrom$V,getModelFrom:getModelFrom$T,registerModelTo:registerModelTo$T};const{BufferGeometry:BufferGeometry$e}=BufferGeometry;let _schema$W=void 0,_model$U=void 0;function getSchemaFrom$W(e){return _schema$W||_createSchema$W(e),_schema$W}function _createSchema$W(e){const t=e.Schema,r=t.Types.Vector2,o=new t({type:{type:String,default:"Curve"},arcLengthDivisions:Number},{id:!1,_id:!1}),a=new t({curves:[o],autoClose:{type:Boolean,default:!1},currentPoint:r},{id:!1,_id:!1}),n=new t({curves:[o],autoClose:{type:Boolean,default:!1},currentPoint:r,uuid:String,holes:[a]},{id:!1,_id:!1});_schema$W=new t({shapes:[n],curveSegments:Number})}function getModelFrom$U(e){return _model$U||_createModel$U(e),_model$U}function _createModel$U(e){const t=BufferGeometry$e.getModelFrom(e);_model$U=t.discriminator("ShapeBufferGeometry",getSchemaFrom$W(e))}function registerModelTo$U(e){return _model$U||_createModel$U(e),e}var ShapeBufferGeometry_1={getSchemaFrom:getSchemaFrom$W,getModelFrom:getModelFrom$U,registerModelTo:registerModelTo$U};const{Geometry:Geometry$i}=Geometry$1;let _schema$X=void 0,_model$V=void 0;function getSchemaFrom$X(e){return _schema$X||_createSchema$X(e),_schema$X}function _createSchema$X(e){const t=e.Schema;_schema$X=new t({})}function getModelFrom$V(e){return _model$V||_createModel$V(e),_model$V}function _createModel$V(e){const t=Geometry$i.getModelFrom(e);_model$V=t.discriminator("ShapeGeometry",getSchemaFrom$X(e))}function registerModelTo$V(e){return _model$V||_createModel$V(e),e}var ShapeGeometry_1={getSchemaFrom:getSchemaFrom$X,getModelFrom:getModelFrom$V,registerModelTo:registerModelTo$V};const{BufferGeometry:BufferGeometry$f}=BufferGeometry;let _schema$Y=void 0,_model$W=void 0;function getSchemaFrom$Y(e){return _schema$Y||_createSchema$Y(e),_schema$Y}function _createSchema$Y(e){const t=e.Schema;_schema$Y=new t({})}function getModelFrom$W(e){return _model$W||_createModel$W(e),_model$W}function _createModel$W(e){const t=BufferGeometry$f.getModelFrom(e);_model$W=t.discriminator("SphereBufferGeometry",getSchemaFrom$Y(e))}function registerModelTo$W(e){return _model$W||_createModel$W(e),e}var SphereBufferGeometry_1={getSchemaFrom:getSchemaFrom$Y,getModelFrom:getModelFrom$W,registerModelTo:registerModelTo$W};const{Geometry:Geometry$j}=Geometry$1;let _schema$Z=void 0,_model$X=void 0;function getSchemaFrom$Z(e){return _schema$Z||_createSchema$Z(e),_schema$Z}function _createSchema$Z(e){const t=e.Schema;_schema$Z=new t({})}function getModelFrom$X(e){return _model$X||_createModel$X(e),_model$X}function _createModel$X(e){const t=Geometry$j.getModelFrom(e);_model$X=t.discriminator("SphereGeometry",getSchemaFrom$Z(e))}function registerModelTo$X(e){return _model$X||_createModel$X(e),e}var SphereGeometry_1={getSchemaFrom:getSchemaFrom$Z,getModelFrom:getModelFrom$X,registerModelTo:registerModelTo$X};const{BufferGeometry:BufferGeometry$g}=BufferGeometry;let _schema$_=void 0,_model$Y=void 0;function getSchemaFrom$_(e){return _schema$_||_createSchema$_(e),_schema$_}function _createSchema$_(e){const t=e.Schema;_schema$_=new t({})}function getModelFrom$Y(e){return _model$Y||_createModel$Y(e),_model$Y}function _createModel$Y(e){const t=BufferGeometry$g.getModelFrom(e);_model$Y=t.discriminator("TeapotBufferGeometry",getSchemaFrom$_(e))}function registerModelTo$Y(e){return _model$Y||_createModel$Y(e),e}var TeapotBufferGeometry={getSchemaFrom:getSchemaFrom$_,getModelFrom:getModelFrom$Y,registerModelTo:registerModelTo$Y};const{BufferGeometry:BufferGeometry$h}=BufferGeometry;let _schema$$=void 0,_model$Z=void 0;function getSchemaFrom$$(e){return _schema$$||_createSchema$$(e),_schema$$}function _createSchema$$(e){const t=e.Schema;_schema$$=new t({})}function getModelFrom$Z(e){return _model$Z||_createModel$Z(e),_model$Z}function _createModel$Z(e){const t=BufferGeometry$h.getModelFrom(e);_model$Z=t.discriminator("TetrahedronBufferGeometry",getSchemaFrom$$(e))}function registerModelTo$Z(e){return _model$Z||_createModel$Z(e),e}var TetrahedronBufferGeometry_1={getSchemaFrom:getSchemaFrom$$,getModelFrom:getModelFrom$Z,registerModelTo:registerModelTo$Z};const{Geometry:Geometry$k}=Geometry$1;let _schema$10=void 0,_model$_=void 0;function getSchemaFrom$10(e){return _schema$10||_createSchema$10(e),_schema$10}function _createSchema$10(e){const t=e.Schema;_schema$10=new t({})}function getModelFrom$_(e){return _model$_||_createModel$_(e),_model$_}function _createModel$_(e){const t=Geometry$k.getModelFrom(e);_model$_=t.discriminator("TetrahedronGeometry",getSchemaFrom$10(e))}function registerModelTo$_(e){return _model$_||_createModel$_(e),e}var TetrahedronGeometry_1={getSchemaFrom:getSchemaFrom$10,getModelFrom:getModelFrom$_,registerModelTo:registerModelTo$_};const{BufferGeometry:BufferGeometry$i}=BufferGeometry;let _schema$11=void 0,_model$$=void 0;function getSchemaFrom$11(e){return _schema$11||_createSchema$11(e),_schema$11}function _createSchema$11(e){const t=e.Schema;_schema$11=new t({})}function getModelFrom$$(e){return _model$$||_createModel$$(e),_model$$}function _createModel$$(e){const t=BufferGeometry$i.getModelFrom(e);_model$$=t.discriminator("TextBufferGeometry",getSchemaFrom$11(e))}function registerModelTo$$(e){return _model$$||_createModel$$(e),e}var TextBufferGeometry_1={getSchemaFrom:getSchemaFrom$11,getModelFrom:getModelFrom$$,registerModelTo:registerModelTo$$};const{Geometry:Geometry$l}=Geometry$1;let _schema$12=void 0,_model$10=void 0;function getSchemaFrom$12(e){return _schema$12||_createSchema$12(e),_schema$12}function _createSchema$12(e){const t=e.Schema;_schema$12=new t({})}function getModelFrom$10(e){return _model$10||_createModel$10(e),_model$10}function _createModel$10(e){const t=Geometry$l.getModelFrom(e);_model$10=t.discriminator("TextGeometry",getSchemaFrom$12(e))}function registerModelTo$10(e){return _model$10||_createModel$10(e),e}var TextGeometry_1={getSchemaFrom:getSchemaFrom$12,getModelFrom:getModelFrom$10,registerModelTo:registerModelTo$10};const{BufferGeometry:BufferGeometry$j}=BufferGeometry;let _schema$13=void 0,_model$11=void 0;function getSchemaFrom$13(e){return _schema$13||_createSchema$13(e),_schema$13}function _createSchema$13(e){const t=e.Schema;_schema$13=new t({})}function getModelFrom$11(e){return _model$11||_createModel$11(e),_model$11}function _createModel$11(e){const t=BufferGeometry$j.getModelFrom(e);_model$11=t.discriminator("TorusBufferGeometry",getSchemaFrom$13(e))}function registerModelTo$11(e){return _model$11||_createModel$11(e),e}var TorusBufferGeometry_1={getSchemaFrom:getSchemaFrom$13,getModelFrom:getModelFrom$11,registerModelTo:registerModelTo$11};const{Geometry:Geometry$m}=Geometry$1;let _schema$14=void 0,_model$12=void 0;function getSchemaFrom$14(e){return _schema$14||_createSchema$14(e),_schema$14}function _createSchema$14(e){const t=e.Schema;_schema$14=new t({})}function getModelFrom$12(e){return _model$12||_createModel$12(e),_model$12}function _createModel$12(e){const t=Geometry$m.getModelFrom(e);_model$12=t.discriminator("TorusGeometry",getSchemaFrom$14(e))}function registerModelTo$12(e){return _model$12||_createModel$12(e),e}var TorusGeometry_1={getSchemaFrom:getSchemaFrom$14,getModelFrom:getModelFrom$12,registerModelTo:registerModelTo$12};const{BufferGeometry:BufferGeometry$k}=BufferGeometry;let _schema$15=void 0,_model$13=void 0;function getSchemaFrom$15(e){return _schema$15||_createSchema$15(e),_schema$15}function _createSchema$15(e){const t=e.Schema;_schema$15=new t({})}function getModelFrom$13(e){return _model$13||_createModel$13(e),_model$13}function _createModel$13(e){const t=BufferGeometry$k.getModelFrom(e);_model$13=t.discriminator("TorusKnotBufferGeometry",getSchemaFrom$15(e))}function registerModelTo$13(e){return _model$13||_createModel$13(e),e}var TorusKnotBufferGeometry_1={getSchemaFrom:getSchemaFrom$15,getModelFrom:getModelFrom$13,registerModelTo:registerModelTo$13};const{Geometry:Geometry$n}=Geometry$1;let _schema$16=void 0,_model$14=void 0;function getSchemaFrom$16(e){return _schema$16||_createSchema$16(e),_schema$16}function _createSchema$16(e){const t=e.Schema;_schema$16=new t({})}function getModelFrom$14(e){return _model$14||_createModel$14(e),_model$14}function _createModel$14(e){const t=Geometry$n.getModelFrom(e);_model$14=t.discriminator("TorusKnotGeometry",getSchemaFrom$16(e))}function registerModelTo$14(e){return _model$14||_createModel$14(e),e}var TorusKnotGeometry_1={getSchemaFrom:getSchemaFrom$16,getModelFrom:getModelFrom$14,registerModelTo:registerModelTo$14};const{BufferGeometry:BufferGeometry$l}=BufferGeometry;let _schema$17=void 0,_model$15=void 0;function getSchemaFrom$17(e){return _schema$17||_createSchema$17(e),_schema$17}function _createSchema$17(e){const t=e.Schema;_schema$17=new t({})}function getModelFrom$15(e){return _model$15||_createModel$15(e),_model$15}function _createModel$15(e){const t=BufferGeometry$l.getModelFrom(e);_model$15=t.discriminator("TubeBufferGeometry",getSchemaFrom$17(e))}function registerModelTo$15(e){return _model$15||_createModel$15(e),e}var TubeBufferGeometry_1={getSchemaFrom:getSchemaFrom$17,getModelFrom:getModelFrom$15,registerModelTo:registerModelTo$15};const{Geometry:Geometry$o}=Geometry$1;let _schema$18=void 0,_model$16=void 0;function getSchemaFrom$18(e){return _schema$18||_createSchema$18(e),_schema$18}function _createSchema$18(e){const t=e.Schema;_schema$18=new t({})}function getModelFrom$16(e){return _model$16||_createModel$16(e),_model$16}function _createModel$16(e){const t=Geometry$o.getModelFrom(e);_model$16=t.discriminator("TubeGeometry",getSchemaFrom$18(e))}function registerModelTo$16(e){return _model$16||_createModel$16(e),e}var TubeGeometry_1={getSchemaFrom:getSchemaFrom$18,getModelFrom:getModelFrom$16,registerModelTo:registerModelTo$16};const{Geometry:Geometry$p}=Geometry$1;let _schema$19=void 0,_model$17=void 0;function getSchemaFrom$19(e){return _schema$19||_createSchema$19(e),_schema$19}function _createSchema$19(e){const t=e.Schema;_schema$19=new t({})}function getModelFrom$17(e){return _model$17||_createModel$17(e),_model$17}function _createModel$17(e){const t=Geometry$p.getModelFrom(e);_model$17=t.discriminator("WireframeGeometry",getSchemaFrom$19(e))}function registerModelTo$17(e){return _model$17||_createModel$17(e),e}var WireframeGeometry_1={getSchemaFrom:getSchemaFrom$19,getModelFrom:getModelFrom$17,registerModelTo:registerModelTo$17};const{Object3D:Object3D$a}=Object3D$1;let _schema$1a=void 0,_model$18=void 0;function getSchemaFrom$1a(e){return _schema$1a||_createSchema$1a(e),_schema$1a}function _createSchema$1a(e){const t=e.Schema;_schema$1a=new t({})}function getModelFrom$18(e){return _model$18||_createModel$18(e),_model$18}function _createModel$18(e){const t=Object3D$a.getModelFrom(e);_model$18=t.discriminator("ArrowHelper",getSchemaFrom$1a(e))}function registerModelTo$18(e){return _model$18||_createModel$18(e),e}var ArrowHelper_1={getSchemaFrom:getSchemaFrom$1a,getModelFrom:getModelFrom$18,registerModelTo:registerModelTo$18};const{Object3D:Object3D$b}=Object3D$1;let _schema$1b=void 0,_model$19=void 0;function getSchemaFrom$1b(e){return _schema$1b||_createSchema$1b(e),_schema$1b}function _createSchema$1b(e){const t=e.Schema;_schema$1b=new t({})}function getModelFrom$19(e){return _model$19||_createModel$19(e),_model$19}function _createModel$19(e){const t=Object3D$b.getModelFrom(e);_model$19=t.discriminator("AxesHelper",getSchemaFrom$1b(e))}function registerModelTo$19(e){return _model$19||_createModel$19(e),e}var AxesHelper_1={getSchemaFrom:getSchemaFrom$1b,getModelFrom:getModelFrom$19,registerModelTo:registerModelTo$19};const{Object3D:Object3D$c}=Object3D$1;let _schema$1c=void 0,_model$1a=void 0;function getSchemaFrom$1c(e){return _schema$1c||_createSchema$1c(e),_schema$1c}function _createSchema$1c(e){const t=e.Schema;_schema$1c=new t({})}function getModelFrom$1a(e){return _model$1a||_createModel$1a(e),_model$1a}function _createModel$1a(e){const t=Object3D$c.getModelFrom(e);_model$1a=t.discriminator("Box3Helper",getSchemaFrom$1c(e))}function registerModelTo$1a(e){return _model$1a||_createModel$1a(e),e}var Box3Helper_1={getSchemaFrom:getSchemaFrom$1c,getModelFrom:getModelFrom$1a,registerModelTo:registerModelTo$1a};const{Object3D:Object3D$d}=Object3D$1;let _schema$1d=void 0,_model$1b=void 0;function getSchemaFrom$1d(e){return _schema$1d||_createSchema$1d(e),_schema$1d}function _createSchema$1d(e){const t=e.Schema;_schema$1d=new t({})}function getModelFrom$1b(e){return _model$1b||_createModel$1b(e),_model$1b}function _createModel$1b(e){const t=Object3D$d.getModelFrom(e);_model$1b=t.discriminator("BoxHelper",getSchemaFrom$1d(e))}function registerModelTo$1b(e){return _model$1b||_createModel$1b(e),e}var BoxHelper_1={getSchemaFrom:getSchemaFrom$1d,getModelFrom:getModelFrom$1b,registerModelTo:registerModelTo$1b};const{Object3D:Object3D$e}=Object3D$1;let _schema$1e=void 0,_model$1c=void 0;function getSchemaFrom$1e(e){return _schema$1e||_createSchema$1e(e),_schema$1e}function _createSchema$1e(e){const t=e.Schema;_schema$1e=new t({})}function getModelFrom$1c(e){return _model$1c||_createModel$1c(e),_model$1c}function _createModel$1c(e){const t=Object3D$e.getModelFrom(e);_model$1c=t.discriminator("CameraHelper",getSchemaFrom$1e(e))}function registerModelTo$1c(e){return _model$1c||_createModel$1c(e),e}var CameraHelper_1={getSchemaFrom:getSchemaFrom$1e,getModelFrom:getModelFrom$1c,registerModelTo:registerModelTo$1c};const{Object3D:Object3D$f}=Object3D$1;let _schema$1f=void 0,_model$1d=void 0;function getSchemaFrom$1f(e){return _schema$1f||_createSchema$1f(e),_schema$1f}function _createSchema$1f(e){const t=e.Schema;_schema$1f=new t({})}function getModelFrom$1d(e){return _model$1d||_createModel$1d(e),_model$1d}function _createModel$1d(e){const t=Object3D$f.getModelFrom(e);_model$1d=t.discriminator("DirectionalLightHelper",getSchemaFrom$1f(e))}function registerModelTo$1d(e){return _model$1d||_createModel$1d(e),e}var DirectionalLightHelper_1={getSchemaFrom:getSchemaFrom$1f,getModelFrom:getModelFrom$1d,registerModelTo:registerModelTo$1d};const{Object3D:Object3D$g}=Object3D$1;let _schema$1g=void 0,_model$1e=void 0;function getSchemaFrom$1g(e){return _schema$1g||_createSchema$1g(e),_schema$1g}function _createSchema$1g(e){const t=e.Schema;_schema$1g=new t({})}function getModelFrom$1e(e){return _model$1e||_createModel$1e(e),_model$1e}function _createModel$1e(e){const t=Object3D$g.getModelFrom(e);_model$1e=t.discriminator("FaceNormalsHelper",getSchemaFrom$1g(e))}function registerModelTo$1e(e){return _model$1e||_createModel$1e(e),e}var FaceNormalsHelper_1={getSchemaFrom:getSchemaFrom$1g,getModelFrom:getModelFrom$1e,registerModelTo:registerModelTo$1e};const{Object3D:Object3D$h}=Object3D$1;let _schema$1h=void 0,_model$1f=void 0;function getSchemaFrom$1h(e){return _schema$1h||_createSchema$1h(e),_schema$1h}function _createSchema$1h(e){const t=e.Schema;_schema$1h=new t({})}function getModelFrom$1f(e){return _model$1f||_createModel$1f(e),_model$1f}function _createModel$1f(e){const t=Object3D$h.getModelFrom(e);_model$1f=t.discriminator("GridHelper",getSchemaFrom$1h(e))}function registerModelTo$1f(e){return _model$1f||_createModel$1f(e),e}var GridHelper_1={getSchemaFrom:getSchemaFrom$1h,getModelFrom:getModelFrom$1f,registerModelTo:registerModelTo$1f};const{Object3D:Object3D$i}=Object3D$1;let _schema$1i=void 0,_model$1g=void 0;function getSchemaFrom$1i(e){return _schema$1i||_createSchema$1i(e),_schema$1i}function _createSchema$1i(e){const t=e.Schema;_schema$1i=new t({})}function getModelFrom$1g(e){return _model$1g||_createModel$1g(e),_model$1g}function _createModel$1g(e){const t=Object3D$i.getModelFrom(e);_model$1g=t.discriminator("HemisphereLightHelper",getSchemaFrom$1i(e))}function registerModelTo$1g(e){return _model$1g||_createModel$1g(e),e}var HemisphereLightHelper_1={getSchemaFrom:getSchemaFrom$1i,getModelFrom:getModelFrom$1g,registerModelTo:registerModelTo$1g};const{Object3D:Object3D$j}=Object3D$1;let _schema$1j=void 0,_model$1h=void 0;function getSchemaFrom$1j(e){return _schema$1j||_createSchema$1j(e),_schema$1j}function _createSchema$1j(e){const t=e.Schema;_schema$1j=new t({})}function getModelFrom$1h(e){return _model$1h||_createModel$1h(e),_model$1h}function _createModel$1h(e){const t=Object3D$j.getModelFrom(e);_model$1h=t.discriminator("PlaneHelper",getSchemaFrom$1j(e))}function registerModelTo$1h(e){return _model$1h||_createModel$1h(e),e}var PlaneHelper_1={getSchemaFrom:getSchemaFrom$1j,getModelFrom:getModelFrom$1h,registerModelTo:registerModelTo$1h};const{Object3D:Object3D$k}=Object3D$1;let _schema$1k=void 0,_model$1i=void 0;function getSchemaFrom$1k(e){return _schema$1k||_createSchema$1k(e),_schema$1k}function _createSchema$1k(e){const t=e.Schema;_schema$1k=new t({})}function getModelFrom$1i(e){return _model$1i||_createModel$1i(e),_model$1i}function _createModel$1i(e){const t=Object3D$k.getModelFrom(e);_model$1i=t.discriminator("PointLightHelper",getSchemaFrom$1k(e))}function registerModelTo$1i(e){return _model$1i||_createModel$1i(e),e}var PointLightHelper_1={getSchemaFrom:getSchemaFrom$1k,getModelFrom:getModelFrom$1i,registerModelTo:registerModelTo$1i};const{Object3D:Object3D$l}=Object3D$1;let _schema$1l=void 0,_model$1j=void 0;function getSchemaFrom$1l(e){return _schema$1l||_createSchema$1l(e),_schema$1l}function _createSchema$1l(e){const t=e.Schema;_schema$1l=new t({})}function getModelFrom$1j(e){return _model$1j||_createModel$1j(e),_model$1j}function _createModel$1j(e){const t=Object3D$l.getModelFrom(e);_model$1j=t.discriminator("PolarGridHelper",getSchemaFrom$1l(e))}function registerModelTo$1j(e){return _model$1j||_createModel$1j(e),e}var PolarGridHelper_1={getSchemaFrom:getSchemaFrom$1l,getModelFrom:getModelFrom$1j,registerModelTo:registerModelTo$1j};const{Object3D:Object3D$m}=Object3D$1;let _schema$1m=void 0,_model$1k=void 0;function getSchemaFrom$1m(e){return _schema$1m||_createSchema$1m(e),_schema$1m}function _createSchema$1m(e){const t=e.Schema;_schema$1m=new t({})}function getModelFrom$1k(e){return _model$1k||_createModel$1k(e),_model$1k}function _createModel$1k(e){const t=Object3D$m.getModelFrom(e);_model$1k=t.discriminator("RectAreaLightHelper",getSchemaFrom$1m(e))}function registerModelTo$1k(e){return _model$1k||_createModel$1k(e),e}var RectAreaLightHelper_1={getSchemaFrom:getSchemaFrom$1m,getModelFrom:getModelFrom$1k,registerModelTo:registerModelTo$1k};const{Object3D:Object3D$n}=Object3D$1;let _schema$1n=void 0,_model$1l=void 0;function getSchemaFrom$1n(e){return _schema$1n||_createSchema$1n(e),_schema$1n}function _createSchema$1n(e){const t=e.Schema;_schema$1n=new t({})}function getModelFrom$1l(e){return _model$1l||_createModel$1l(e),_model$1l}function _createModel$1l(e){const t=Object3D$n.getModelFrom(e);_model$1l=t.discriminator("SkeletonHelper",getSchemaFrom$1n(e))}function registerModelTo$1l(e){return _model$1l||_createModel$1l(e),e}var SkeletonHelper_1={getSchemaFrom:getSchemaFrom$1n,getModelFrom:getModelFrom$1l,registerModelTo:registerModelTo$1l};const{Object3D:Object3D$o}=Object3D$1;let _schema$1o=void 0,_model$1m=void 0;function getSchemaFrom$1o(e){return _schema$1o||_createSchema$1o(e),_schema$1o}function _createSchema$1o(e){const t=e.Schema;_schema$1o=new t({})}function getModelFrom$1m(e){return _model$1m||_createModel$1m(e),_model$1m}function _createModel$1m(e){const t=Object3D$o.getModelFrom(e);_model$1m=t.discriminator("SpotLightHelper",getSchemaFrom$1o(e))}function registerModelTo$1m(e){return _model$1m||_createModel$1m(e),e}var SpotLightHelper_1={getSchemaFrom:getSchemaFrom$1o,getModelFrom:getModelFrom$1m,registerModelTo:registerModelTo$1m};const{Object3D:Object3D$p}=Object3D$1;let _schema$1p=void 0,_model$1n=void 0;function getSchemaFrom$1p(e){return _schema$1p||_createSchema$1p(e),_schema$1p}function _createSchema$1p(e){const t=e.Schema;_schema$1p=new t({})}function getModelFrom$1n(e){return _model$1n||_createModel$1n(e),_model$1n}function _createModel$1n(e){const t=Object3D$p.getModelFrom(e);_model$1n=t.discriminator("VertexNormalsHelper",getSchemaFrom$1p(e))}function registerModelTo$1n(e){return _model$1n||_createModel$1n(e),e}var VertexNormalsHelper_1={getSchemaFrom:getSchemaFrom$1p,getModelFrom:getModelFrom$1n,registerModelTo:registerModelTo$1n};const{Object3D:Object3D$q}=Object3D$1;let _schema$1q=void 0,_model$1o=void 0;function getSchemaFrom$1q(e){return _schema$1q||_createSchema$1q(e),_schema$1q}function _createSchema$1q(e){const t=e.Schema;_schema$1q=new t({})}function getModelFrom$1o(e){return _model$1o||_createModel$1o(e),_model$1o}function _createModel$1o(e){const t=Object3D$q.getModelFrom(e);_model$1o=t.discriminator("AmbientLight",getSchemaFrom$1q(e))}function registerModelTo$1o(e){return _model$1o||_createModel$1o(e),e}var AmbientLight_1={getSchemaFrom:getSchemaFrom$1q,getModelFrom:getModelFrom$1o,registerModelTo:registerModelTo$1o};const{Object3D:Object3D$r}=Object3D$1;let _schema$1r=void 0,_model$1p=void 0;function getSchemaFrom$1r(e){return _schema$1r||_createSchema$1r(e),_schema$1r}function _createSchema$1r(e){const t=e.Schema;_schema$1r=new t({})}function getModelFrom$1p(e){return _model$1p||_createModel$1p(e),_model$1p}function _createModel$1p(e){const t=Object3D$r.getModelFrom(e);_model$1p=t.discriminator("DirectionalLight",getSchemaFrom$1r(e))}function registerModelTo$1p(e){return _model$1p||_createModel$1p(e),e}var DirectionalLight_1={getSchemaFrom:getSchemaFrom$1r,getModelFrom:getModelFrom$1p,registerModelTo:registerModelTo$1p};const{Object3D:Object3D$s}=Object3D$1;let _schema$1s=void 0,_model$1q=void 0;function getSchemaFrom$1s(e){return _schema$1s||_createSchema$1s(e),_schema$1s}function _createSchema$1s(e){const t=e.Schema;_schema$1s=new t({})}function getModelFrom$1q(e){return _model$1q||_createModel$1q(e),_model$1q}function _createModel$1q(e){const t=Object3D$s.getModelFrom(e);_model$1q=t.discriminator("HemisphereLight",getSchemaFrom$1s(e))}function registerModelTo$1q(e){return _model$1q||_createModel$1q(e),e}var HemisphereLight_1={getSchemaFrom:getSchemaFrom$1s,getModelFrom:getModelFrom$1q,registerModelTo:registerModelTo$1q};const{Object3D:Object3D$t}=Object3D$1;let _schema$1t=void 0,_model$1r=void 0;function getSchemaFrom$1t(e){return _schema$1t||_createSchema$1t(e),_schema$1t}function _createSchema$1t(e){const t=e.Schema;_schema$1t=new t({})}function getModelFrom$1r(e){return _model$1r||_createModel$1r(e),_model$1r}function _createModel$1r(e){const t=Object3D$t.getModelFrom(e);_model$1r=t.discriminator("Light",getSchemaFrom$1t(e))}function registerModelTo$1r(e){return _model$1r||_createModel$1r(e),e}var Light_1={getSchemaFrom:getSchemaFrom$1t,getModelFrom:getModelFrom$1r,registerModelTo:registerModelTo$1r};const{Object3D:Object3D$u}=Object3D$1;let _schema$1u=void 0,_model$1s=void 0;function getSchemaFrom$1u(e){return _schema$1u||_createSchema$1u(e),_schema$1u}function _createSchema$1u(e){const t=e.Schema;_schema$1u=new t({})}function getModelFrom$1s(e){return _model$1s||_createModel$1s(e),_model$1s}function _createModel$1s(e){const t=Object3D$u.getModelFrom(e);_model$1s=t.discriminator("PointLight",getSchemaFrom$1u(e))}function registerModelTo$1s(e){return _model$1s||_createModel$1s(e),e}var PointLight_1={getSchemaFrom:getSchemaFrom$1u,getModelFrom:getModelFrom$1s,registerModelTo:registerModelTo$1s};const{Object3D:Object3D$v}=Object3D$1;let _schema$1v=void 0,_model$1t=void 0;function getSchemaFrom$1v(e){return _schema$1v||_createSchema$1v(e),_schema$1v}function _createSchema$1v(e){const t=e.Schema;_schema$1v=new t({})}function getModelFrom$1t(e){return _model$1t||_createModel$1t(e),_model$1t}function _createModel$1t(e){const t=Object3D$v.getModelFrom(e);_model$1t=t.discriminator("RectAreaLight",getSchemaFrom$1v(e))}function registerModelTo$1t(e){return _model$1t||_createModel$1t(e),e}var RectAreaLight_1={getSchemaFrom:getSchemaFrom$1v,getModelFrom:getModelFrom$1t,registerModelTo:registerModelTo$1t};const{Object3D:Object3D$w}=Object3D$1;let _schema$1w=void 0,_model$1u=void 0;function getSchemaFrom$1w(e){return _schema$1w||_createSchema$1w(e),_schema$1w}function _createSchema$1w(e){const t=e.Schema;_schema$1w=new t({})}function getModelFrom$1u(e){return _model$1u||_createModel$1u(e),_model$1u}function _createModel$1u(e){const t=Object3D$w.getModelFrom(e);_model$1u=t.discriminator("SpotLight",getSchemaFrom$1w(e))}function registerModelTo$1u(e){return _model$1u||_createModel$1u(e),e}var SpotLight_1={getSchemaFrom:getSchemaFrom$1w,getModelFrom:getModelFrom$1u,registerModelTo:registerModelTo$1u};let _schema$1x=void 0,_model$1v=void 0;function getSchemaFrom$1x(e){return _schema$1x||_createSchema$1x(e),_schema$1x}function _createSchema$1x(e){const t=e.Schema,r=t.Types.Mixed;_schema$1x=new t({uuid:String,name:String,type:String,fog:Boolean,lights:Boolean,blending:Number,side:Number,flatShading:Boolean,vertexColors:Number,opacity:Number,transparent:Boolean,blendSrc:Number,blendDst:Number,blendEquation:Number,blendSrcAlpha:String,blendDstAlpha:String,blendEquationAlpha:String,depthFunc:Number,depthTest:Boolean,depthWrite:Boolean,clippingPlanes:r,clipIntersection:Boolean,clipShadows:Boolean,colorWrite:Boolean,precision:Number,polygonOffset:Boolean,polygonOffsetFactor:Number,polygonOffsetUnits:Number,dithering:Boolean,alphaTest:Number,premultipliedAlpha:Boolean,overdraw:Number,visible:Boolean,userData:r,needsUpdate:Boolean},{collection:"materials",discriminatorKey:"type"})}function getModelFrom$1v(e){return _model$1v||_createModel$1v(e),_model$1v}function _createModel$1v(e){(_model$1v=e.model("Materials",getSchemaFrom$1x(e))).discriminator("Material",new e.Schema({}))}function registerModelTo$1v(e){return _model$1v||_createModel$1v(e),e}var Material_1={getSchemaFrom:getSchemaFrom$1x,getModelFrom:getModelFrom$1v,registerModelTo:registerModelTo$1v},Material={Material:Material_1};const{Material:Material$1}=Material;let _schema$1y=void 0,_model$1w=void 0;function getSchemaFrom$1y(e){return _schema$1y||_createSchema$1y(e),_schema$1y}function _createSchema$1y(e){const t=e.Schema,r=t.Types.Color;_schema$1y=new t({color:r,light:Boolean,lineWidth:Number,linecap:String,linejoin:String})}function getModelFrom$1w(e){return _model$1w||_createModel$1w(e),_model$1w}function _createModel$1w(e){const t=Material$1.getModelFrom(e);_model$1w=t.discriminator("LineBasicMaterial",getSchemaFrom$1y(e))}function registerModelTo$1w(e){return _model$1w||_createModel$1w(e),e}var LineBasicMaterial_1={getSchemaFrom:getSchemaFrom$1y,getModelFrom:getModelFrom$1w,registerModelTo:registerModelTo$1w};const{Material:Material$2}=Material;let _schema$1z=void 0,_model$1x=void 0;function getSchemaFrom$1z(e){return _schema$1z||_createSchema$1z(e),_schema$1z}function _createSchema$1z(e){const t=e.Schema,r=t.Types.Color;_schema$1z=new t({color:r,light:Boolean,lineWidth:Number,linecap:String,linejoin:String,dashSize:Number,gapSize:Number,scale:Number})}function getModelFrom$1x(e){return _model$1x||_createModel$1x(e),_model$1x}function _createModel$1x(e){const t=Material$2.getModelFrom(e);_model$1x=t.discriminator("LineDashedMaterial",getSchemaFrom$1z(e))}function registerModelTo$1x(e){return _model$1x||_createModel$1x(e),e}var LineDashedMaterial_1={getSchemaFrom:getSchemaFrom$1z,getModelFrom:getModelFrom$1x,registerModelTo:registerModelTo$1x};const{Material:Material$3}=Material;let _schema$1A=void 0,_model$1y=void 0;function getSchemaFrom$1A(e){return _schema$1A||_createSchema$1A(e),_schema$1A}function _createSchema$1A(e){const t=e.Schema,r=t.Types,o=r.Mixed,a=r.Color;_schema$1A=new t({color:a,map:o,lightMap:o,lightMapIntensity:Number,aoMap:o,aoMapIntensity:Number,specularMap:o,alphaMap:o,envMap:o,combine:Number,reflectivity:Number,refractionRatio:Number,wireframe:Boolean,wireframeLinewidth:Number,wireframeLinecap:String,wireframeLinejoin:String,skinning:Boolean,morphTargets:Boolean,light:Boolean})}function getModelFrom$1y(e){return _model$1y||_createModel$1y(e),_model$1y}function _createModel$1y(e){const t=Material$3.getModelFrom(e);_model$1y=t.discriminator("MeshBasicMaterial",getSchemaFrom$1A(e))}function registerModelTo$1y(e){return _model$1y||_createModel$1y(e),e}var MeshBasicMaterial_1={getSchemaFrom:getSchemaFrom$1A,getModelFrom:getModelFrom$1y,registerModelTo:registerModelTo$1y};const{Material:Material$4}=Material;let _schema$1B=void 0,_model$1z=void 0;function getSchemaFrom$1B(e){return _schema$1B||_createSchema$1B(e),_schema$1B}function _createSchema$1B(e){const t=e.Schema,r=t.Types.Mixed;_schema$1B=new t({depthPacking:Number,skinning:Boolean,morphTargets:Boolean,map:r,alphaMap:r,displacementMap:r,displacementScale:Number,displacementBias:Number,wireframe:Boolean,wireframeLinewidth:Number,fog:Boolean,light:Boolean})}function getModelFrom$1z(e){return _model$1z||_createModel$1z(e),_model$1z}function _createModel$1z(e){const t=Material$4.getModelFrom(e);_model$1z=t.discriminator("MeshDepthMaterial",getSchemaFrom$1B(e))}function registerModelTo$1z(e){return _model$1z||_createModel$1z(e),e}var MeshDepthMaterial_1={getSchemaFrom:getSchemaFrom$1B,getModelFrom:getModelFrom$1z,registerModelTo:registerModelTo$1z};const{Material:Material$5}=Material;let _schema$1C=void 0,_model$1A=void 0;function getSchemaFrom$1C(e){return _schema$1C||_createSchema$1C(e),_schema$1C}function _createSchema$1C(e){const t=e.Schema,r=t.Types,o=r.Color,a=r.Mixed;_schema$1C=new t({color:o,map:a,lightMap:a,lightMapIntensity:Number,aoMap:a,aoMapIntensity:Number,emissive:o,emissiveIntensity:Number,emissiveMap:a,specularMap:a,alphaMap:a,envMap:a,combine:Number,reflectivity:Number,refractionRatio:Number,wireframe:Boolean,wireframeLinewidth:Number,wireframeLinecap:String,wireframeLinejoin:String,skinning:Boolean,morphTargets:Boolean,morphNormals:Boolean})}function getModelFrom$1A(e){return _model$1A||_createModel$1A(e),_model$1A}function _createModel$1A(e){const t=Material$5.getModelFrom(e);_model$1A=t.discriminator("MeshLambertMaterial",getSchemaFrom$1C(e))}function registerModelTo$1A(e){return _model$1A||_createModel$1A(e),e}var MeshLambertMaterial_1={getSchemaFrom:getSchemaFrom$1C,getModelFrom:getModelFrom$1A,registerModelTo:registerModelTo$1A};const{Material:Material$6}=Material;let _schema$1D=void 0,_model$1B=void 0;function getSchemaFrom$1D(e){return _schema$1D||_createSchema$1D(e),_schema$1D}function _createSchema$1D(e){const t=e.Schema,r=t.Types,o=r.Mixed,a=r.Vector2;_schema$1D=new t({bumpMap:o,bumpScale:Number,normalMap:o,normalScale:a,displacementMap:o,displacementScale:Number,displacementBias:Number,wireframe:Boolean,wireframeLinewidth:Number,fog:Boolean,light:Boolean,skinning:Boolean,morphTargets:Boolean,morphNormals:Boolean})}function getModelFrom$1B(e){return _model$1B||_createModel$1B(e),_model$1B}function _createModel$1B(e){const t=Material$6.getModelFrom(e);_model$1B=t.discriminator("MeshNormalMaterial",getSchemaFrom$1D(e))}function registerModelTo$1B(e){return _model$1B||_createModel$1B(e),e}var MeshNormalMaterial_1={getSchemaFrom:getSchemaFrom$1D,getModelFrom:getModelFrom$1B,registerModelTo:registerModelTo$1B};const{Material:Material$7}=Material;let _schema$1E=void 0,_model$1C=void 0;function getSchemaFrom$1E(e){return _schema$1E||_createSchema$1E(e),_schema$1E}function _createSchema$1E(e){const t=e.Schema,r=t.Types,o=r.Mixed,a=r.Color,n=r.Vector2;_schema$1E=new t({color:a,specular:a,shininess:Number,map:o,lightMap:o,lightMapIntensity:Number,aoMap:o,aoMapIntensity:Number,emissive:a,emissiveIntensity:Number,emissiveMap:o,bumpMap:o,bumpScale:Number,normalMap:o,normalScale:n,displacementMap:o,displacementScale:Number,displacementBias:Number,specularMap:o,alphaMap:o,envMap:o,combine:Number,reflectivity:Number,refractionRatio:Number,wireframe:Boolean,wireframeLinewidth:Number,wireframeLinecap:String,wireframeLinejoin:String,skinning:Boolean,morphTargets:Boolean,morphNormals:Boolean})}function getModelFrom$1C(e){return _model$1C||_createModel$1C(e),_model$1C}function _createModel$1C(e){const t=Material$7.getModelFrom(e);_model$1C=t.discriminator("MeshPhongMaterial",getSchemaFrom$1E(e))}function registerModelTo$1C(e){return _model$1C||_createModel$1C(e),e}var MeshPhongMaterial_1={getSchemaFrom:getSchemaFrom$1E,getModelFrom:getModelFrom$1C,registerModelTo:registerModelTo$1C};const{Material:Material$8}=Material;let _schema$1F=void 0,_model$1D=void 0;function getSchemaFrom$1F(e){return _schema$1F||_createSchema$1F(e),_schema$1F}function _createSchema$1F(e){const t=e.Schema;_schema$1F=new t({reflectivity:Number,clearCoat:Number,clearCoatRoughness:Number})}function getModelFrom$1D(e){return _model$1D||_createModel$1D(e),_model$1D}function _createModel$1D(e){const t=Material$8.getModelFrom(e);_model$1D=t.discriminator("MeshPhysicalMaterial",getSchemaFrom$1F(e))}function registerModelTo$1D(e){return _model$1D||_createModel$1D(e),e}var MeshPhysicalMaterial_1={getSchemaFrom:getSchemaFrom$1F,getModelFrom:getModelFrom$1D,registerModelTo:registerModelTo$1D};const{Material:Material$9}=Material;let _schema$1G=void 0,_model$1E=void 0;function getSchemaFrom$1G(e){return _schema$1G||_createSchema$1G(e),_schema$1G}function _createSchema$1G(e){const t=e.Schema,r=t.Types,o=r.Mixed,a=r.Color,n=r.Vector2;_schema$1G=new t({color:a,roughness:Number,metalness:Number,map:o,lightMap:o,lightMapIntensity:Number,aoMap:o,aoMapIntensity:Number,emissive:a,emissiveIntensity:Number,emissiveMap:o,bumpMap:o,bumpScale:Number,normalMap:o,normalScale:n,displacementMap:o,displacementScale:Number,displacementBias:Number,roughnessMap:o,metalnessMap:o,alphaMap:o,envMap:o,envMapIntensity:Number,refractionRatio:Number,wireframe:Boolean,wireframeLinewidth:Number,wireframeLinecap:String,wireframeLinejoin:String,skinning:Boolean,morphTargets:Boolean,morphNormals:Boolean})}function getModelFrom$1E(e){return _model$1E||_createModel$1E(e),_model$1E}function _createModel$1E(e){const t=Material$9.getModelFrom(e);_model$1E=t.discriminator("MeshStandardMaterial",getSchemaFrom$1G(e))}function registerModelTo$1E(e){return _model$1E||_createModel$1E(e),e}var MeshStandardMaterial_1={getSchemaFrom:getSchemaFrom$1G,getModelFrom:getModelFrom$1E,registerModelTo:registerModelTo$1E};const{Material:Material$a}=Material;let _schema$1H=void 0,_model$1F=void 0;function getSchemaFrom$1H(e){return _schema$1H||_createSchema$1H(e),_schema$1H}function _createSchema$1H(e){const t=e.Schema,r=t.Types,o=r.Mixed,a=r.Color,n=r.Vector2;_schema$1H=new t({color:a,specular:a,shininess:Number,map:o,lightMap:o,lightMapIntensity:Number,aoMap:o,aoMapIntensity:Number,emissive:a,emissiveIntensity:Number,emissiveMap:o,bumpMap:o,bumpScale:Number,normalMap:o,normalScale:n,displacementMap:o,displacementScale:Number,displacementBias:Number,specularMap:o,alphaMap:o,envMap:o,combine:Number,reflectivity:Number,refractionRatio:Number,wireframe:Boolean,wireframeLinewidth:Number,wireframeLinecap:String,wireframeLinejoin:String,skinning:Boolean,morphTargets:Boolean,morphNormals:Boolean,gradientMap:o})}function getModelFrom$1F(e){return _model$1F||_createModel$1F(e),_model$1F}function _createModel$1F(e){const t=Material$a.getModelFrom(e);_model$1F=t.discriminator("MeshToonMaterial",getSchemaFrom$1H(e))}function registerModelTo$1F(e){return _model$1F||_createModel$1F(e),e}var MeshToonMaterial_1={getSchemaFrom:getSchemaFrom$1H,getModelFrom:getModelFrom$1F,registerModelTo:registerModelTo$1F};const{Material:Material$b}=Material;let _schema$1I=void 0,_model$1G=void 0;function getSchemaFrom$1I(e){return _schema$1I||_createSchema$1I(e),_schema$1I}function _createSchema$1I(e){const t=e.Schema,r=t.Types,o=r.Color,a=r.Mixed;_schema$1I=new t({color:o,map:a,size:Number,sizeAttenuation:Boolean,lights:Boolean})}function getModelFrom$1G(e){return _model$1G||_createModel$1G(e),_model$1G}function _createModel$1G(e){const t=Material$b.getModelFrom(e);_model$1G=t.discriminator("PointsMaterial",getSchemaFrom$1I(e))}function registerModelTo$1G(e){return _model$1G||_createModel$1G(e),e}var PointsMaterial_1={getSchemaFrom:getSchemaFrom$1I,getModelFrom:getModelFrom$1G,registerModelTo:registerModelTo$1G};const{Material:Material$c}=Material;let _schema$1J=void 0,_model$1H=void 0;function getSchemaFrom$1J(e){return _schema$1J||_createSchema$1J(e),_schema$1J}function _createSchema$1J(e){const t=e.Schema,r=t.Types.Mixed;_schema$1J=new t({defines:r,uniforms:r,vertexShader:String,fragmentShader:String,linewidth:Number,wireframe:Boolean,wireframeLinewidth:Number,fog:Boolean,light:Boolean,clipping:Boolean,skinning:Boolean,morphTargets:Boolean,morphNormals:Boolean,derivatives:Boolean,fragDepth:Boolean,drawBuffers:Boolean,shaderTextureLOD:Boolean})}function getModelFrom$1H(e){return _model$1H||_createModel$1H(e),_model$1H}function _createModel$1H(e){const t=Material$c.getModelFrom(e);_model$1H=t.discriminator("RawShaderMaterial",getSchemaFrom$1J(e))}function registerModelTo$1H(e){return _model$1H||_createModel$1H(e),e}var RawShaderMaterial_1={getSchemaFrom:getSchemaFrom$1J,getModelFrom:getModelFrom$1H,registerModelTo:registerModelTo$1H};const{Material:Material$d}=Material;let _schema$1K=void 0,_model$1I=void 0;function getSchemaFrom$1K(e){return _schema$1K||_createSchema$1K(e),_schema$1K}function _createSchema$1K(e){const t=e.Schema,r=t.Types.Mixed;_schema$1K=new t({defines:r,uniforms:r,vertexShader:String,fragmentShader:String,linewidth:Number,wireframe:Boolean,wireframeLinewidth:Number,fog:Boolean,light:Boolean,clipping:Boolean,skinning:Boolean,morphTargets:Boolean,morphNormals:Boolean,derivatives:Boolean,fragDepth:Boolean,drawBuffers:Boolean,shaderTextureLOD:Boolean})}function getModelFrom$1I(e){return _model$1I||_createModel$1I(e),_model$1I}function _createModel$1I(e){const t=Material$d.getModelFrom(e);_model$1I=t.discriminator("ShaderMaterial",getSchemaFrom$1K(e))}function registerModelTo$1I(e){return _model$1I||_createModel$1I(e),e}var ShaderMaterial_1={getSchemaFrom:getSchemaFrom$1K,getModelFrom:getModelFrom$1I,registerModelTo:registerModelTo$1I};const{Material:Material$e}=Material;let _schema$1L=void 0,_model$1J=void 0;function getSchemaFrom$1L(e){return _schema$1L||_createSchema$1L(e),_schema$1L}function _createSchema$1L(e){const t=e.Schema,r=t.Types.Color;_schema$1L=new t({color:r,opacity:Number,lights:Boolean,transparent:Boolean})}function getModelFrom$1J(e){return _model$1J||_createModel$1J(e),_model$1J}function _createModel$1J(e){const t=Material$e.getModelFrom(e);_model$1J=t.discriminator("ShadowMaterial",getSchemaFrom$1L(e))}function registerModelTo$1J(e){return _model$1J||_createModel$1J(e),e}var ShadowMaterial_1={getSchemaFrom:getSchemaFrom$1L,getModelFrom:getModelFrom$1J,registerModelTo:registerModelTo$1J};const{Material:Material$f}=Material;let _schema$1M=void 0,_model$1K=void 0;function getSchemaFrom$1M(e){return _schema$1M||_createSchema$1M(e),_schema$1M}function _createSchema$1M(e){const t=e.Schema,r=t.Types,o=r.Color,a=r.Mixed;_schema$1M=new t({color:o,map:a,rotation:Number,fog:Boolean,lights:Boolean})}function getModelFrom$1K(e){return _model$1K||_createModel$1K(e),_model$1K}function _createModel$1K(e){const t=Material$f.getModelFrom(e);_model$1K=t.discriminator("SpriteMaterial",getSchemaFrom$1M(e))}function registerModelTo$1K(e){return _model$1K||_createModel$1K(e),e}var SpriteMaterial_1={getSchemaFrom:getSchemaFrom$1M,getModelFrom:getModelFrom$1K,registerModelTo:registerModelTo$1K};let _schema$1N=void 0;function getSchemaFrom$1N(e){return _schema$1N||_createSchema$1N(e),_schema$1N}function _createSchema$1N(e){const t=e.Schema,r=t.Types.Vector2;_schema$1N=new t({min:r,max:r},{_id:!1,id:!1})}var Box2_1={getSchemaFrom:getSchemaFrom$1N,getModelFrom:()=>null,registerModelTo:e=>e};let _schema$1O=void 0;function getSchemaFrom$1O(e){return _schema$1O||_createSchema$1O(e),_schema$1O}function _createSchema$1O(e){const t=e.Schema,r=t.Types.Vector3;_schema$1O=new t({min:r,max:r},{_id:!1,id:!1})}var Box3_1={getSchemaFrom:getSchemaFrom$1O,getModelFrom:()=>null,registerModelTo:e=>e};let _schema$1P=void 0;function getSchemaFrom$1P(e){return _schema$1P||_createSchema$1P(e),_schema$1P}function _createSchema$1P(e){const t=e.Schema,r=t.Types.Vector3;_schema$1P=new t({start:r,end:r},{_id:!1,id:!1})}var Line3_1={getSchemaFrom:getSchemaFrom$1P,getModelFrom:()=>null,registerModelTo:e=>e};let _schema$1Q=void 0;function getSchemaFrom$1Q(e){return _schema$1Q||_createSchema$1Q(e),_schema$1Q}function _createSchema$1Q(e){const t=e.Schema,r=t.Types.Vector3;_schema$1Q=new t({normal:r,constant:Number},{_id:!1,id:!1})}var Plane_1={getSchemaFrom:getSchemaFrom$1Q,getModelFrom:()=>null,registerModelTo:e=>e};let _schema$1R=void 0;function getSchemaFrom$1R(e){return _schema$1R||_createSchema$1R(e),_schema$1R}function _createSchema$1R(e){const t=e.Schema,r=t.Types.Vector3;_schema$1R=new t({origin:r,direction:r},{_id:!1,id:!1})}var Ray_1={getSchemaFrom:getSchemaFrom$1R,getModelFrom:()=>null,registerModelTo:e=>e};let _schema$1S=void 0;function getSchemaFrom$1S(e){return _schema$1S||_createSchema$1S(e),_schema$1S}function _createSchema$1S(e){const t=e.Schema,r=t.Types.Vector3;_schema$1S=new t({center:r,radius:Number},{_id:!1,id:!1})}var Sphere_1={getSchemaFrom:getSchemaFrom$1S,getModelFrom:()=>null,registerModelTo:e=>e};let _schema$1T=void 0;function getSchemaFrom$1T(e){return _schema$1T||_createSchema$1T(e),_schema$1T}function _createSchema$1T(e){const t=e.Schema;_schema$1T=new t({radius:Number,phi:Number,theta:Number},{_id:!1,id:!1})}var Spherical_1={getSchemaFrom:getSchemaFrom$1T,getModelFrom:()=>null,registerModelTo:e=>e};let _schema$1U=void 0;function getSchemaFrom$1U(e){return _schema$1U||_createSchema$1U(e),_schema$1U}function _createSchema$1U(e){const t=e.Schema,r=t.Types.Vector3;_schema$1U=new t({a:r,b:r,c:r},{_id:!1,id:!1})}var Triangle_1={getSchemaFrom:getSchemaFrom$1U,getModelFrom:()=>null,registerModelTo:e=>e};const{Object3D:Object3D$x}=Object3D$1;let _schema$1V=void 0,_model$1L=void 0;function getSchemaFrom$1V(e){return _schema$1V||_createSchema$1V(e),_schema$1V}function _createSchema$1V(e){const t=e.Schema;_schema$1V=new t({})}function getModelFrom$1L(e){return _model$1L||_createModel$1L(e),_model$1L}function _createModel$1L(e){const t=Object3D$x.getModelFrom(e);_model$1L=t.discriminator("Bone",getSchemaFrom$1V(e))}function registerModelTo$1L(e){return _model$1L||_createModel$1L(e),e}var Bone_1={getSchemaFrom:getSchemaFrom$1V,getModelFrom:getModelFrom$1L,registerModelTo:registerModelTo$1L};let _schema$1W=void 0,_model$1M=void 0;function getSchemaFrom$1W(e){return _schema$1W||_createSchema$1W(e),_schema$1W}function _createSchema$1W(e){const t=e.Schema;_schema$1W=new t({})}function getModelFrom$1M(e){return _model$1M||_createModel$1M(e),_model$1M}function _createModel$1M(e){const t=Object3D.getModelFrom(e);_model$1M=t.discriminator("Group",getSchemaFrom$1W(e))}function registerModelTo$1M(e){return _model$1M||_createModel$1M(e),e}const Group={getSchemaFrom:getSchemaFrom$1W,getModelFrom:getModelFrom$1M,registerModelTo:registerModelTo$1M},{Object3D:Object3D$y}=Object3D$1;let _schema$1X=void 0,_model$1N=void 0;function getSchemaFrom$1X(e){return _schema$1X||_createSchema$1X(e),_schema$1X}function _createSchema$1X(e){const t=e.Schema;_schema$1X=new t({})}function getModelFrom$1N(e){return _model$1N||_createModel$1N(e),_model$1N}function _createModel$1N(e){const t=Object3D$y.getModelFrom(e);_model$1N=t.discriminator("ImmediateRenderObject",getSchemaFrom$1X(e))}function registerModelTo$1N(e){return _model$1N||_createModel$1N(e),e}var ImmediateRenderObject_1={getSchemaFrom:getSchemaFrom$1X,getModelFrom:getModelFrom$1N,registerModelTo:registerModelTo$1N};const{Object3D:Object3D$z}=Object3D$1;let _schema$1Y=void 0,_model$1O=void 0;function getSchemaFrom$1Y(e){return _schema$1Y||_createSchema$1Y(e),_schema$1Y}function _createSchema$1Y(e){const t=e.Schema,r=t.Types,o=r.ObjectId,a=r.Color,n=r.Vector3;_schema$1Y=new t({lensFlares:[{texture:o,size:Number,distance:Number,x:Number,y:Number,z:Number,scale:Number,rotation:Number,opacity:Number,color:a,blending:Number}],positionScreen:n})}function getModelFrom$1O(e){return _model$1O||_createModel$1O(e),_model$1O}function _createModel$1O(e){const t=Object3D$z.getModelFrom(e);_model$1O=t.discriminator("LensFlare",getSchemaFrom$1Y(e))}function registerModelTo$1O(e){return _model$1O||_createModel$1O(e),e}var LensFlare={getSchemaFrom:getSchemaFrom$1Y,getModelFrom:getModelFrom$1O,registerModelTo:registerModelTo$1O};const{Object3D:Object3D$A}=Object3D$1;let _schema$1Z=void 0,_model$1P=void 0;function getSchemaFrom$1Z(e){return _schema$1Z||_createSchema$1Z(e),_schema$1Z}function _createSchema$1Z(e){const t=e.Schema,r=t.Types.ObjectId;_schema$1Z=new t({geometry:{type:r,ref:"Geometry"},material:[{type:r,ref:"LineBasicMaterial"}],drawMode:Number})}function getModelFrom$1P(e){return _model$1P||_createModel$1P(e),_model$1P}function _createModel$1P(e){const t=Object3D$A.getModelFrom(e);_model$1P=t.discriminator("Line",getSchemaFrom$1Z(e))}function registerModelTo$1P(e){return _model$1P||_createModel$1P(e),e}var Line_1={getSchemaFrom:getSchemaFrom$1Z,getModelFrom:getModelFrom$1P,registerModelTo:registerModelTo$1P};const{Object3D:Object3D$B}=Object3D$1;let _schema$1_=void 0,_model$1Q=void 0;function getSchemaFrom$1_(e){return _schema$1_||_createSchema$1_(e),_schema$1_}function _createSchema$1_(e){const t=e.Schema,r=t.Types.ObjectId;_schema$1_=new t({geometry:{type:r,ref:"Geometry"},material:[{type:r,ref:"LineBasicMaterial"}],drawMode:Number})}function getModelFrom$1Q(e){return _model$1Q||_createModel$1Q(e),_model$1Q}function _createModel$1Q(e){const t=Object3D$B.getModelFrom(e);_model$1Q=t.discriminator("LineLoop",getSchemaFrom$1_(e))}function registerModelTo$1Q(e){return _model$1Q||_createModel$1Q(e),e}var LineLoop_1={getSchemaFrom:getSchemaFrom$1_,getModelFrom:getModelFrom$1Q,registerModelTo:registerModelTo$1Q};const{Object3D:Object3D$C}=Object3D$1;let _schema$1$=void 0,_model$1R=void 0;function getSchemaFrom$1$(e){return _schema$1$||_createSchema$1$(e),_schema$1$}function _createSchema$1$(e){const t=e.Schema,r=t.Types.ObjectId;_schema$1$=new t({geometry:{type:r,ref:"Geometry"},material:[{type:r,ref:"LineBasicMaterial"}],drawMode:Number})}function getModelFrom$1R(e){return _model$1R||_createModel$1R(e),_model$1R}function _createModel$1R(e){const t=Object3D$C.getModelFrom(e);_model$1R=t.discriminator("LineSegments",getSchemaFrom$1$(e))}function registerModelTo$1R(e){return _model$1R||_createModel$1R(e),e}var LineSegments_1={getSchemaFrom:getSchemaFrom$1$,getModelFrom:getModelFrom$1R,registerModelTo:registerModelTo$1R};const{Object3D:Object3D$D}=Object3D$1;let _schema$20=void 0,_model$1S=void 0;function getSchemaFrom$20(e){return _schema$20||_createSchema$20(e),_schema$20}function _createSchema$20(e){const t=e.Schema,r=t.Types.Mixed;_schema$20=new t({levels:[r]})}function getModelFrom$1S(e){return _model$1S||_createModel$1S(e),_model$1S}function _createModel$1S(e){const t=Object3D$D.getModelFrom(e);_model$1S=t.discriminator("LOD",getSchemaFrom$20(e))}function registerModelTo$1S(e){return _model$1S||_createModel$1S(e),e}var LOD_1={getSchemaFrom:getSchemaFrom$20,getModelFrom:getModelFrom$1S,registerModelTo:registerModelTo$1S};const{Object3D:Object3D$E}=Object3D$1;let _schema$21=void 0,_model$1T=void 0;function getSchemaFrom$21(e){return _schema$21||_createSchema$21(e),_schema$21}function _createSchema$21(e){const t=e.Schema,r=t.Types.ObjectId;_schema$21=new t({geometry:{type:r,ref:"Geometry"},material:[{type:r,ref:"Material"}],drawMode:Number})}function getModelFrom$1T(e){return _model$1T||_createModel$1T(e),_model$1T}function _createModel$1T(e){const t=Object3D$E.getModelFrom(e);_model$1T=t.discriminator("Mesh",getSchemaFrom$21(e))}function registerModelTo$1T(e){return _model$1T||_createModel$1T(e),e}var Mesh_1={getSchemaFrom:getSchemaFrom$21,getModelFrom:getModelFrom$1T,registerModelTo:registerModelTo$1T};const{Object3D:Object3D$F}=Object3D$1;let _schema$22=void 0,_model$1U=void 0;function getSchemaFrom$22(e){return _schema$22||_createSchema$22(e),_schema$22}function _createSchema$22(e){const t=e.Schema,r=t.Types.ObjectId;_schema$22=new t({geometry:{type:r,ref:"Geometry"},material:[{type:r,ref:"PointsMaterial"}],drawMode:Number})}function getModelFrom$1U(e){return _model$1U||_createModel$1U(e),_model$1U}function _createModel$1U(e){const t=Object3D$F.getModelFrom(e);_model$1U=t.discriminator("Points",getSchemaFrom$22(e))}function registerModelTo$1U(e){return _model$1U||_createModel$1U(e),e}var Points_1={getSchemaFrom:getSchemaFrom$22,getModelFrom:getModelFrom$1U,registerModelTo:registerModelTo$1U};const{Object3D:Object3D$G}=Object3D$1;let _schema$23=void 0,_model$1V=void 0;function getSchemaFrom$23(e){return _schema$23||_createSchema$23(e),_schema$23}function _createSchema$23(e){const t=e.Schema,r=t.Types.ObjectId;_schema$23=new t({bones:[r],boneMatrices:[Number]})}function getModelFrom$1V(e){return _model$1V||_createModel$1V(e),_model$1V}function _createModel$1V(e){const t=Object3D$G.getModelFrom(e);_model$1V=t.discriminator("Skeleton",getSchemaFrom$23(e))}function registerModelTo$1V(e){return _model$1V||_createModel$1V(e),e}var Skeleton_1={getSchemaFrom:getSchemaFrom$23,getModelFrom:getModelFrom$1V,registerModelTo:registerModelTo$1V};const{Object3D:Object3D$H}=Object3D$1;let _schema$24=void 0,_model$1W=void 0;function getSchemaFrom$24(e){return _schema$24||_createSchema$24(e),_schema$24}function _createSchema$24(e){const t=e.Schema,r=t.Types.ObjectId;_schema$24=new t({geometry:{type:r,ref:"Geometry"},material:[{type:r,ref:"Material"}],drawMode:Number,bindMode:String,bindMatrix:[Number],bindMatrixInverse:[Number]})}function getModelFrom$1W(e){return _model$1W||_createModel$1W(e),_model$1W}function _createModel$1W(e){const t=Object3D$H.getModelFrom(e);_model$1W=t.discriminator("SkinnedMesh",getSchemaFrom$24(e))}function registerModelTo$1W(e){return _model$1W||_createModel$1W(e),e}var SkinnedMesh_1={getSchemaFrom:getSchemaFrom$24,getModelFrom:getModelFrom$1W,registerModelTo:registerModelTo$1W};const{Object3D:Object3D$I}=Object3D$1;let _schema$25=void 0,_model$1X=void 0;function getSchemaFrom$25(e){return _schema$25||_createSchema$25(e),_schema$25}function _createSchema$25(e){const t=e.Schema,r=t.Types.ObjectId;_schema$25=new t({material:[{type:r,ref:"SpriteMaterial"}]})}function getModelFrom$1X(e){return _model$1X||_createModel$1X(e),_model$1X}function _createModel$1X(e){const t=Object3D$I.getModelFrom(e);_model$1X=t.discriminator("Sprite",getSchemaFrom$25(e))}function registerModelTo$1X(e){return _model$1X||_createModel$1X(e),e}var Sprite_1={getSchemaFrom:getSchemaFrom$25,getModelFrom:getModelFrom$1X,registerModelTo:registerModelTo$1X};let _schema$26=void 0;function getSchemaFrom$26(e){return _schema$26||_createSchema$26(e),_schema$26}function _createSchema$26(e){const t=e.Schema;_schema$26=new t({coordinates:{x:Number,y:Number,z:Number},orientation:{x:Number,y:Number,z:Number},thumbnail:Buffer,path:String},{_id:!1,id:!1})}var Fog_1={getSchemaFrom:getSchemaFrom$26,getModelFrom:()=>null,registerModelTo:e=>e},Fog={Fog:Fog_1};const{Object3D:Object3D$J}=Object3D$1,{Fog:Fog$1}=Fog;let _schema$27=void 0,_model$1Y=void 0;function getSchemaFrom$27(e){return _schema$27||_createSchema$27(e),_schema$27}function _createSchema$27(e){const t=Fog$1.getSchemaFrom(e),r=e.Schema,o=r.Types.Color;_schema$27=new r({background:o,fog:t,overrideMaterial:String,autoUpdate:Boolean})}function getModelFrom$1Y(e){return _model$1Y||_createModel$1Y(e),_model$1Y}function _createModel$1Y(e){const t=Object3D$J.getModelFrom(e);_model$1Y=t.discriminator("Scene",getSchemaFrom$27(e))}function registerModelTo$1Y(e){return _model$1Y||_createModel$1Y(e),e}var Scene_1={getSchemaFrom:getSchemaFrom$27,getModelFrom:getModelFrom$1Y,registerModelTo:registerModelTo$1Y};let _schema$28=void 0,_model$1Z=void 0;function getSchemaFrom$28(e){return _schema$28||_createSchema$28(e),_schema$28}function _createSchema$28(e){const t=e.Schema,r=t.Types,o=r.ObjectId,a=r.Vector2,n=r.Matrix3;_schema$28=new t({uuid:String,name:String,image:o,mipmaps:[],mapping:Number,wrapS:Number,wrapT:Number,magFilter:Number,minFilter:Number,anisotropy:Number,format:Number,type:Number,offset:a,repeat:a,center:a,rotation:Number,matrixAutoUpdate:Boolean,matrix:n,generateMipmaps:Boolean,premultiplyAlpha:Boolean,flipY:Boolean,unpackAlignment:Number,encoding:Number,version:Number},{collection:"textures",discriminatorKey:"type"})}function getModelFrom$1Z(e){return _model$1Z||_createModel$1Z(e),_model$1Z}function _createModel$1Z(e){(_model$1Z=e.model("Textures",getSchemaFrom$28(e))).discriminator("Texture",new e.Schema({}))}function registerModelTo$1Z(e){return _model$1Z||_createModel$1Z(e),e}var Texture_1={getSchemaFrom:getSchemaFrom$28,getModelFrom:getModelFrom$1Z,registerModelTo:registerModelTo$1Z},Texture={Texture:Texture_1};const{Texture:Texture$1}=Texture;let _schema$29=void 0,_model$1_=void 0;function getSchemaFrom$29(e){return _schema$29||_createSchema$29(e),_schema$29}function _createSchema$29(e){const t=e.Schema;_schema$29=new t({needsUpdate:Boolean})}function getModelFrom$1_(e){return _model$1_||_createModel$1_(e),_model$1_}function _createModel$1_(e){const t=Texture$1.getModelFrom(e);_model$1_=t.discriminator("CanvasTexture",getSchemaFrom$29(e))}function registerModelTo$1_(e){return _model$1_||_createModel$1_(e),e}var CanvasTexture_1={getSchemaFrom:getSchemaFrom$29,getModelFrom:getModelFrom$1_,registerModelTo:registerModelTo$1_};const{Texture:Texture$2}=Texture;let _schema$2a=void 0,_model$1$=void 0;function getSchemaFrom$2a(e){return _schema$2a||_createSchema$2a(e),_schema$2a}function _createSchema$2a(e){const t=e.Schema;_schema$2a=new t({})}function getModelFrom$1$(e){return _model$1$||_createModel$1$(e),_model$1$}function _createModel$1$(e){const t=Texture$2.getModelFrom(e);_model$1$=t.discriminator("CompressedTexture",getSchemaFrom$2a(e))}function registerModelTo$1$(e){return _model$1$||_createModel$1$(e),e}var CompressedTexture_1={getSchemaFrom:getSchemaFrom$2a,getModelFrom:getModelFrom$1$,registerModelTo:registerModelTo$1$};const{Texture:Texture$3}=Texture;let _schema$2b=void 0,_model$20=void 0;function getSchemaFrom$2b(e){return _schema$2b||_createSchema$2b(e),_schema$2b}function _createSchema$2b(e){const t=e.Schema;_schema$2b=new t({})}function getModelFrom$20(e){return _model$20||_createModel$20(e),_model$20}function _createModel$20(e){const t=Texture$3.getModelFrom(e);_model$20=t.discriminator("CubeTexture",getSchemaFrom$2b(e))}function registerModelTo$20(e){return _model$20||_createModel$20(e),e}var CubeTexture_1={getSchemaFrom:getSchemaFrom$2b,getModelFrom:getModelFrom$20,registerModelTo:registerModelTo$20};const{Texture:Texture$4}=Texture;let _schema$2c=void 0,_model$21=void 0;function getSchemaFrom$2c(e){return _schema$2c||_createSchema$2c(e),_schema$2c}function _createSchema$2c(e){const t=e.Schema;_schema$2c=new t({})}function getModelFrom$21(e){return _model$21||_createModel$21(e),_model$21}function _createModel$21(e){const t=Texture$4.getModelFrom(e);_model$21=t.discriminator("DataTexture",getSchemaFrom$2c(e))}function registerModelTo$21(e){return _model$21||_createModel$21(e),e}var DataTexture_1={getSchemaFrom:getSchemaFrom$2c,getModelFrom:getModelFrom$21,registerModelTo:registerModelTo$21};const{Texture:Texture$5}=Texture;let _schema$2d=void 0,_model$22=void 0;function getSchemaFrom$2d(e){return _schema$2d||_createSchema$2d(e),_schema$2d}function _createSchema$2d(e){const t=e.Schema;_schema$2d=new t({})}function getModelFrom$22(e){return _model$22||_createModel$22(e),_model$22}function _createModel$22(e){const t=Texture$5.getModelFrom(e);_model$22=t.discriminator("DepthTexture",getSchemaFrom$2d(e))}function registerModelTo$22(e){return _model$22||_createModel$22(e),e}var DepthTexture_1={getSchemaFrom:getSchemaFrom$2d,getModelFrom:getModelFrom$22,registerModelTo:registerModelTo$22};const{Texture:Texture$6}=Texture;let _schema$2e=void 0,_model$23=void 0;function getSchemaFrom$2e(e){return _schema$2e||_createSchema$2e(e),_schema$2e}function _createSchema$2e(e){const t=e.Schema;_schema$2e=new t({})}function getModelFrom$23(e){return _model$23||_createModel$23(e),_model$23}function _createModel$23(e){const t=Texture$6.getModelFrom(e);_model$23=t.discriminator("VideoTexture",getSchemaFrom$2e(e))}function registerModelTo$23(e){return _model$23||_createModel$23(e),e}var VideoTexture_1={getSchemaFrom:getSchemaFrom$2e,getModelFrom:getModelFrom$23,registerModelTo:registerModelTo$23};function ColorType(e){class t extends e.SchemaType{constructor(e,t){super(e,t,"Color")}cast(t){if(iteeValidators.isNotDefined(t))throw new e.SchemaType.CastError(`Color: ${t} is null or undefined`);if(iteeValidators.isNotObject(t)&&!t.isColor)throw new e.SchemaType.CastError(`Color: ${t} is not a object or Color instance`);if(!("r"in t))throw new e.SchemaType.CastError(`Color: ${t} does not contain r property`);if(iteeValidators.isNotNumber(t.r))throw new e.SchemaType.CastError(`Color: ${t} expected to be a number`);if(!("g"in t))throw new e.SchemaType.CastError(`Color: ${t} does not contain g property`);if(iteeValidators.isNotNumber(t.g))throw new e.SchemaType.CastError(`Color: ${t} expected to be a number`);if(!("b"in t))throw new e.SchemaType.CastError(`Color: ${t} does not contain b property`);if(iteeValidators.isNotNumber(t.b))throw new e.SchemaType.CastError(`Color: ${t} expected to be a number`);return{r:t.r,g:t.g,b:t.b}}}return t.COLOR_BSON_TYPE=bson.BSON_DATA_OBJECT,e.Schema.Types.Color=t,e}function EulerType(e){const t=e.SchemaType,r=e.Schema.Types;function o(e,r){t.call(this,e,r,"Euler")}return o.prototype=Object.assign(Object.create(t.prototype),{cast(e){if(iteeValidators.isNotDefined(e))throw new Error(`Euler: ${e} is null or undefined`);if(iteeValidators.isNotObject(e)&&!e.isEuler)throw new Error(`Euler: ${e} is not a object or Euler instance`);if(!("x"in e))throw new Error(`Euler: ${e} does not contain x property`);if(iteeValidators.isNotNumber(e.x))throw new Error(`Euler: ${e} expected x to be a number`);if(!("y"in e))throw new Error(`Euler: ${e} does not contain y property`);if(iteeValidators.isNotNumber(e.y))throw new Error(`Euler: ${e} expected y to be a number`);if(!("z"in e))throw new Error(`Euler: ${e} does not contain z property`);if(iteeValidators.isNotNumber(e.z))throw new Error(`Euler: ${e} expected z to be a number`);if(!("order"in e))throw new Error(`Euler: ${e} does not contain order property`);if(iteeValidators.isNotString(e.order))throw new Error(`Euler: ${e} expected order to be a string`);if(!["XYZ","YZX","ZXY","XZY","YXZ","ZYX"].includes(e.order.toUpperCase()))throw new Error(`Euler: ${e} expected order to be a string in ['XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX']`);return{x:e.x,y:e.y,z:e.z,order:e.order.toUpperCase()}}}),r.Euler=o,e}function Matrix3Type(e){const t=e.SchemaType,r=e.Schema.Types;function o(e,r){t.call(this,e,r,"Matrix3")}return o.prototype=Object.assign(Object.create(t.prototype),{cast(e){if(iteeValidators.isNotDefined(e))throw new Error(`Matrix3: ${e} is null or undefined`);if(iteeValidators.isNotArray(e)&&!e.isMatrix3)throw new Error(`Matrix3: ${e} is not a object or Matrix3 instance`);let t=void 0;const r=(t=e.isMatrix3?e.toArray():e).length;if(9!==r)throw new Error(`Matrix3: ${e} does not contain the right number of values. Expect 9 values and found ${r}`);for(let o=0,a=void 0;o<r;o++){if(a=t[o],iteeValidators.isNotNumber(a))throw new Error(`Matrix3: ${e} does not seem to contain right values. Expect values in range 0 and 1.`);if(iteeValidators.isNaN(a))throw new Error(`Matrix3: ${e} does not seem to contain right values. Expect values in range 0 and 1.`)}return t}}),r.Matrix3=o,e}function Matrix4Type(e){const t=e.SchemaType,r=e.Schema.Types;function o(e,r){t.call(this,e,r,"Matrix4")}return o.prototype=Object.assign(Object.create(t.prototype),{cast(e){if(iteeValidators.isNotDefined(e))throw new Error(`Matrix4: ${e} is null or undefined`);if(iteeValidators.isNotArray(e)&&!e.isMatrix4)throw new Error(`Matrix4: ${e} is not a object or Matrix4 instance`);let t=void 0;const r=(t=e.isMatrix4?e.toArray():e).length;if(16!==r)throw new Error(`Matrix4: ${e} does not contain the right number of values. Expect 9 values and found ${r}`);for(let o=0,a=void 0;o<r;o++){if(a=t[o],iteeValidators.isNotNumber(a))throw new Error(`Matrix4: ${e} does not seem to contain right values. Expect values in range 0 and 1.`);if(iteeValidators.isNaN(a))throw new Error(`Matrix4: ${e} does not seem to contain right values. Expect values in range 0 and 1.`)}return t}}),r.Matrix4=o,e}function QuaternionType(e){const t=e.SchemaType,r=e.Schema.Types;function o(e,r){t.call(this,e,r,"Quaternion")}return o.prototype=Object.assign(Object.create(t.prototype),{cast(e){if(iteeValidators.isNotDefined(e))throw new Error(`Quaternion: ${e} is null or undefined`);if(!("x"in e))throw new Error(`Quaternion: ${e} does not contain x property`);if(iteeValidators.isNotNumber(e.x))throw new Error(`Quaternion: ${e} expected to be a number`);if(!("y"in e))throw new Error(`Quaternion: ${e} does not contain y property`);if(iteeValidators.isNotNumber(e.y))throw new Error(`Quaternion: ${e} expected to be a number`);if(!("z"in e))throw new Error(`Quaternion: ${e} does not contain z property`);if(iteeValidators.isNotNumber(e.z))throw new Error(`Quaternion: ${e} expected to be a number`);if(!("w"in e))throw new Error(`Quaternion: ${e} does not contain w property`);if(iteeValidators.isNotNumber(e.w))throw new Error(`Quaternion: ${e} expected to be a number`);return{x:e.x,y:e.y,z:e.z,w:e.w}}}),r.Quaternion=o,e}function Vector2Type(e){const t=e.SchemaType,r=e.Schema.Types;function o(e,r){t.call(this,e,r,"Vector2")}return o.prototype=Object.assign(Object.create(t.prototype),{cast(e){if(iteeValidators.isNotDefined(e))throw new Error(`Vector2: ${e} is null or undefined`);if(iteeValidators.isNotObject(e)&&!e.isVector2)throw new Error(`Vector2: ${e} is not a object or Vector2 instance`);if(!("x"in e))throw new Error(`Vector2: ${e} does not contain x property`);if(iteeValidators.isNotNumber(e.x))throw new Error(`Vector2: ${e} expected to be a number`);if(!("y"in e))throw new Error(`Vector2: ${e} does not contain y property`);if(iteeValidators.isNotNumber(e.y))throw new Error(`Vector2: ${e} expected to be a number`);return{x:e.x,y:e.y}}}),r.Vector2=o,e}function Vector3Type(e){const t=e.SchemaType,r=e.Schema.Types;function o(e,r){t.call(this,e,r,"Vector3")}return o.prototype=Object.assign(Object.create(t.prototype),{cast(e){if(iteeValidators.isNotDefined(e))throw new Error(`Vector3: ${e} is null or undefined`);if(iteeValidators.isNotObject(e)&&!e.isVector3)throw new Error(`Vector3: ${e} is not a object or Vector3 instance`);if(!("x"in e))throw new Error(`Vector3: ${e} does not contain x property`);if(iteeValidators.isNotNumber(e.x))throw new Error(`Vector3: ${e} expected to be a number`);if(!("y"in e))throw new Error(`Vector3: ${e} does not contain y property`);if(iteeValidators.isNotNumber(e.y))throw new Error(`Vector3: ${e} expected to be a number`);if(!("z"in e))throw new Error(`Vector3: ${e} does not contain z property`);if(iteeValidators.isNotNumber(e.z))throw new Error(`Vector3: ${e} expected to be a number`);return{x:e.x,y:e.y,z:e.z}}}),r.Vector3=o,e}function Vector4Type(e){const t=e.SchemaType,r=e.Schema.Types;function o(e,r){t.call(this,e,r,"Vector4")}return o.prototype=Object.assign(Object.create(t.prototype),{cast(e){if(iteeValidators.isNotDefined(e))throw new Error(`Vector4: ${e} is null or undefined`);if(iteeValidators.isNotObject(e)&&!e.isVector4)throw new Error(`Vector4: ${e} is not a object or Vector4 instance`);if(!("x"in e))throw new Error(`Vector4: ${e} does not contain x property`);if(iteeValidators.isNotNumber(e.x))throw new Error(`Vector4: ${e} expected to be a number`);if(!("y"in e))throw new Error(`Vector4: ${e} does not contain y property`);if(iteeValidators.isNotNumber(e.y))throw new Error(`Vector4: ${e} expected to be a number`);if(!("z"in e))throw new Error(`Vector4: ${e} does not contain z property`);if(iteeValidators.isNotNumber(e.z))throw new Error(`Vector4: ${e} expected to be a number`);if(!("w"in e))throw new Error(`Vector4: ${e} does not contain w property`);if(iteeValidators.isNotNumber(e.w))throw new Error(`Vector4: ${e} expected to be a number`);return{x:e.x,y:e.y,z:e.z,w:e.w}}}),r.Vector4=o,e}var MongoDBThreePlugin=(new TMongoDBPlugin).addType(ColorType).addType(EulerType).addType(Matrix3Type).addType(Matrix4Type).addType(QuaternionType).addType(Vector2Type).addType(Vector3Type).addType(Vector4Type).addSchema(Audio_1).addSchema(AudioListener_1).addSchema(PositionalAudio_1).addSchema(ArrayCamera_1).addSchema(Camera_1).addSchema(CubeCamera_1).addSchema(OrthographicCamera_1).addSchema(PerspectiveCamera_1).addSchema(BufferAttribute_1).addSchema(BufferGeometry_1).addSchema(CurvePath_1).addSchema(Face3_1).addSchema(Geometry).addSchema(Object3D).addSchema(Path_1).addSchema(Shape_1).addSchema(ArcCurve_1).addSchema(CatmullRomCurve3_1).addSchema(CubicBezierCurve_1).addSchema(CubicBezierCurve3_1).addSchema(Curve_1).addSchema(CurveExtras_1).addSchema(EllipseCurve_1).addSchema(LineCurve_1).addSchema(LineCurve3_1).addSchema(NURBSCurve_1).addSchema(NURBSSurface_1).addSchema(QuadraticBezierCurve_1).addSchema(QuadraticBezierCurve3_1).addSchema(SplineCurve_1).addSchema(BoxBufferGeometry_1).addSchema(BoxGeometry_1).addSchema(CircleBufferGeometry_1).addSchema(CircleGeometry_1).addSchema(ConeBufferGeometry_1).addSchema(ConeGeometry_1).addSchema(ConvexGeometry_1).addSchema(CylinderBufferGeometry_1).addSchema(CylinderGeometry_1).addSchema(DecalGeometry_1).addSchema(DodecahedronGeometry_1).addSchema(EdgesGeometry_1).addSchema(ExtrudeBufferGeometry_1).addSchema(ExtrudeGeometry_1).addSchema(IcosahedronBufferGeometry_1).addSchema(IcosahedronGeometry_1).addSchema(InstancedBufferGeometry_1).addSchema(LatheBufferGeometry_1).addSchema(LatheGeometry_1).addSchema(OctahedronBufferGeometry_1).addSchema(OctahedronGeometry_1).addSchema(ParametricBufferGeometry_1).addSchema(ParametricGeometry_1).addSchema(PlaneBufferGeometry_1).addSchema(PlaneGeometry_1).addSchema(PolyhedronBufferGeometry_1).addSchema(PolyhedronGeometry_1).addSchema(RingBufferGeometry_1).addSchema(RingGeometry_1).addSchema(ShapeBufferGeometry_1).addSchema(ShapeGeometry_1).addSchema(SphereBufferGeometry_1).addSchema(SphereGeometry_1).addSchema(TeapotBufferGeometry).addSchema(TetrahedronBufferGeometry_1).addSchema(TetrahedronGeometry_1).addSchema(TextBufferGeometry_1).addSchema(TextGeometry_1).addSchema(TorusBufferGeometry_1).addSchema(TorusGeometry_1).addSchema(TorusKnotBufferGeometry_1).addSchema(TorusKnotGeometry_1).addSchema(TubeBufferGeometry_1).addSchema(TubeGeometry_1).addSchema(WireframeGeometry_1).addSchema(ArrowHelper_1).addSchema(AxesHelper_1).addSchema(Box3Helper_1).addSchema(BoxHelper_1).addSchema(CameraHelper_1).addSchema(DirectionalLightHelper_1).addSchema(FaceNormalsHelper_1).addSchema(GridHelper_1).addSchema(HemisphereLightHelper_1).addSchema(PlaneHelper_1).addSchema(PointLightHelper_1).addSchema(PolarGridHelper_1).addSchema(RectAreaLightHelper_1).addSchema(SkeletonHelper_1).addSchema(SpotLightHelper_1).addSchema(VertexNormalsHelper_1).addSchema(AmbientLight_1).addSchema(DirectionalLight_1).addSchema(HemisphereLight_1).addSchema(Light_1).addSchema(PointLight_1).addSchema(RectAreaLight_1).addSchema(SpotLight_1).addSchema(MeshPhongMaterial_1).addSchema(LineBasicMaterial_1).addSchema(LineDashedMaterial_1).addSchema(Material_1).addSchema(MeshBasicMaterial_1).addSchema(MeshDepthMaterial_1).addSchema(MeshLambertMaterial_1).addSchema(MeshNormalMaterial_1).addSchema(MeshPhysicalMaterial_1).addSchema(MeshStandardMaterial_1).addSchema(MeshToonMaterial_1).addSchema(PointsMaterial_1).addSchema(RawShaderMaterial_1).addSchema(ShaderMaterial_1).addSchema(ShadowMaterial_1).addSchema(SpriteMaterial_1).addSchema(Box2_1).addSchema(Box3_1).addSchema(Line3_1).addSchema(Plane_1).addSchema(Ray_1).addSchema(Sphere_1).addSchema(Spherical_1).addSchema(Triangle_1).addSchema(Bone_1).addSchema(Group).addSchema(ImmediateRenderObject_1).addSchema(LensFlare).addSchema(Line_1).addSchema(LineLoop_1).addSchema(LineSegments_1).addSchema(LOD_1).addSchema(Mesh_1).addSchema(Points_1).addSchema(Skeleton_1).addSchema(SkinnedMesh_1).addSchema(Sprite_1).addSchema(Fog_1).addSchema(Scene_1).addSchema(CanvasTexture_1).addSchema(CompressedTexture_1).addSchema(CubeTexture_1).addSchema(DataTexture_1).addSchema(DepthTexture_1).addSchema(Texture_1).addSchema(VideoTexture_1).addController(TMongooseController).addDescriptor({route:"/objects",controller:{name:"TMongooseController",options:{schemaName:"Objects3D"},can:{create:{on:"put",over:"/(:id)?"},read:{on:"post",over:"/(:id)?"},update:{on:"patch",over:"/(:id)?"},delete:{on:"delete",over:"/(:id)?"}}}}).addDescriptor({route:"/curves",controller:{name:"TMongooseController",options:{schemaName:"Curves"},can:{create:{on:"put",over:"/(:id)?"},read:{on:"post",over:"/(:id)?"},update:{on:"patch",over:"/(:id)?"},delete:{on:"delete",over:"/(:id)?"}}}}).addDescriptor({route:"/geometries",controller:{name:"TMongooseController",options:{schemaName:"Geometries"},can:{create:{on:"put",over:"/(:id)?"},read:{on:"post",over:"/(:id)?"},update:{on:"patch",over:"/(:id)?"},delete:{on:"delete",over:"/(:id)?"}}}}).addDescriptor({route:"/materials",controller:{name:"TMongooseController",options:{schemaName:"Materials"},can:{create:{on:"put",over:"/(:id)?"},read:{on:"post",over:"/(:id)?"},update:{on:"patch",over:"/(:id)?"},delete:{on:"delete",over:"/(:id)?"}}}}).addDescriptor({route:"/textures",controller:{name:"TMongooseController",options:{schemaName:"Textures"},can:{create:{on:"put",over:"/(:id)?"},read:{on:"post",over:"/(:id)?"},update:{on:"patch",over:"/(:id)?"},delete:{on:"delete",over:"/(:id)?"}}}}).addController(iteeDatabase.TAbstractConverterManager).addDescriptor({route:"/uploads",controller:{name:"TAbstractConverterManager",options:{useNext:!0,converters:{JsonToThree:new JsonToThree,ShpToThree:new ShpToThree,DbfToThree:new DbfToThree,FbxToThree:new FbxToThree,ColladaToThree:new ColladaToThree,StlToThree:new StlToThree,TdsToThree:new TdsToThree,MtlToThree:new MtlToThree,ObjToThree:new Obj2ToThree},rules:[{on:".json",use:"JsonToThree"},{on:".dae",use:"ColladaToThree"},{on:".fbx",use:"FbxToThree"},{on:".stl",use:"StlToThree"},{on:".3ds",use:"TdsToThree"},{on:".shp",use:"ShpToThree"},{on:".dbf",use:"DbfToThree"},{on:[".shp",".dbf"],use:["ShpToThree","DbfToThree"]},{on:".mtl",use:"MtlToThree"},{on:".obj",use:"ObjToThree"},{on:[".mtl",".obj"],use:["MtlToThree","ObjToThree"]}],inserter:ThreeToMongoDB},can:{processFiles:{on:"post",over:"/"}}}});module.exports=MongoDBThreePlugin;
//# sourceMappingURL=itee-plugin-three.cjs.min.js.map
